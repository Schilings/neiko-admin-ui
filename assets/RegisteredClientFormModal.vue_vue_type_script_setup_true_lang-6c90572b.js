/* empty css                *//* empty css              */import{B as de}from"./index-cf5fb184.js";import{_ as me,F as pe}from"./index-e1aeaf6d.js";import"./index-64985671.js";import"./index-51c9200e.js";import{_ as ce}from"./index-5d5b84ea.js";/* empty css              */import{C as fe}from"./index-dd4d7eb0.js";import"./index-c9d35858.js";/* empty css              */import{I as ve}from"./index-4f3b583f.js";import{g as _e,c as Z,b as ge,r as he,a as ke}from"./index-584fda6a.js";/* empty css              */import{u as Te}from"./modal-94b635e5.js";import{u as Ce,F as H,a as be}from"./form-d9144801.js";import{o as ye}from"./bean-utils-948c4eb4.js";import{h as B,M as Ue}from"./index-d8cf9b9f.js";import{M as Se}from"./MinusCircleOutlined-ca305951.js";import{_ as Pe}from"./PlusOutlined-6c7b8f6a.js";import{_ as c,x as Ae,p as Re}from"./useConfigInject-4e7e38f3.js";import{u as ee}from"./FormItemContext-d1513cce.js";import{o as te}from"./styleChecker-cd40cf0f.js";import{d as J,R as ne,a as e,L as oe,o as z,c as D,w as n,u as t,ad as ae,an as p,a5 as d,a6 as we,ak as Fe,F as Ie}from"./runtime-core.esm-bundler-e620233b.js";import{_ as xe}from"./Password-b11b167b.js";import{a as Me,S as ze}from"./index-fd0b6746.js";import{a as Be,_ as Le}from"./index-a6c0766c.js";import{a as De,_ as Oe}from"./RadioButton-65a1cb88.js";var G=function(){return{format:String,showNow:{type:Boolean,default:void 0},showHour:{type:Boolean,default:void 0},showMinute:{type:Boolean,default:void 0},showSecond:{type:Boolean,default:void 0},use12Hours:{type:Boolean,default:void 0},hourStep:Number,minuteStep:Number,secondStep:Number,hideDisabledOptions:{type:Boolean,default:void 0},popupClassName:String}};function Ne(v){var y=_e(v,c(c({},G()),{},{order:{type:Boolean,default:!0}})),N=y.TimePicker,K=y.RangePicker,Y=J({name:"ATimePicker",inheritAttrs:!1,props:c(c(c(c({},Z()),ge()),G()),{},{addon:{type:Function}}),slot:["addon","renderExtraFooter","suffixIcon","clearIcon"],setup:function(g,k){var T=k.slots,U=k.expose,m=k.emit,o=k.attrs,C=ee();Ae(!(T.addon||g.addon),"TimePicker","`addon` is deprecated. Please use `v-slot:renderExtraFooter` instead.");var b=ne();U({focus:function(){var u;(u=b.value)===null||u===void 0||u.focus()},blur:function(){var u;(u=b.value)===null||u===void 0||u.blur()}});var w=function(u,f){m("update:value",u),m("change",u,f),C.onFieldChange()},F=function(u){m("update:open",u),m("openChange",u)},S=function(u){m("focus",u)},I=function(u){m("blur",u),C.onFieldBlur()},x=function(u){m("ok",u)};return function(){var r=g.id,u=r===void 0?C.id.value:r;return e(N,c(c(c({},o),te(g,["onUpdate:value","onUpdate:open"])),{},{id:u,dropdownClassName:g.popupClassName,mode:void 0,ref:b,renderExtraFooter:g.addon||T.addon||g.renderExtraFooter||T.renderExtraFooter,onChange:w,onOpenChange:F,onFocus:S,onBlur:I,onOk:x}),T)}}}),L=J({name:"ATimeRangePicker",inheritAttrs:!1,props:c(c(c(c({},Z()),he()),G()),{},{order:{type:Boolean,default:!0}}),slot:["renderExtraFooter","suffixIcon","clearIcon"],setup:function(g,k){var T=k.slots,U=k.expose,m=k.emit,o=k.attrs,C=ne(),b=ee();U({focus:function(){var i;(i=C.value)===null||i===void 0||i.focus()},blur:function(){var i;(i=C.value)===null||i===void 0||i.blur()}});var w=function(i,a){m("update:value",i),m("change",i,a),b.onFieldChange()},F=function(i){m("update:open",i),m("openChange",i)},S=function(i){m("focus",i)},I=function(i){m("blur",i),b.onFieldBlur()},x=function(i,a){m("panelChange",i,a)},r=function(i){m("ok",i)},u=function(i,a,h){m("calendarChange",i,a,h)};return function(){var f=g.id,i=f===void 0?b.id.value:f;return e(K,c(c(c({},o),te(g,["onUpdate:open","onUpdate:value"])),{},{id:i,dropdownClassName:g.popupClassName,picker:"time",mode:void 0,ref:C,onChange:w,onOpenChange:F,onFocus:S,onBlur:I,onPanelChange:x,onOk:r,onCalendarChange:u}),T)}}});return{TimePicker:Y,TimeRangePicker:L}}var ie=Ne(ke),O=ie.TimePicker,V=ie.TimeRangePicker;const Ke=Re(O,{TimePicker:O,TimeRangePicker:V,install:function(y){return y.component(O.name,O),y.component(V.name,V),y}});function kt(v){return B.get("/authorization/registeredClient/registeredClientPage",{params:v})}function Ye(v){return B.get(`/authorization/registeredClient/${v}`)}function qe(v){return B.post("/authorization/registeredClient",v)}function Ee(v){return B.put("/authorization/registeredClient",v)}function Tt(v){return B.delete("/authorization/registeredClient/"+v)}const je={name:"RegisteredClientFormModal"},Ct=J({...je,emits:["submit-success"],setup(v,{expose:y,emit:N}){const K={sm:{span:24},md:{span:8}},Y={sm:{span:24},md:{span:16}},L={sm:{span:24},md:{offset:8,span:24}},{title:R,visible:g,openModal:k,closeModal:T}=Te(),{formAction:U,isUpdateForm:m}=Ce(),o=oe({id:void 0,clientId:"",clientSecret:"",clientName:"",clientAuthenticationMethods:[],authorizationGrantTypes:[],redirectUris:[],scopes:[],requireProofKey:1,requireAuthorizationConsent:1,jwkSetUrl:"",signingAlgorithm:"RSA256",accessTokenTimeToLive:3600,refreshTokenTimeToLive:7200,authorizationCodeTimeToLive:300,reuseRefreshTokens:1,tokenFormat:"jwt",idTokenSignatureAlgorithm:"RSA256",redirectUrisWithKey:[{value:"",key:new Date}]}),C=i=>{let a=o.redirectUrisWithKey.indexOf(i);a!==-1&&o.redirectUris.splice(a,1)},b=()=>{o.redirectUrisWithKey.push({value:"",key:new Date})},w=oe({clientId:[{required:!0,message:"请输入客户端ID!"}],clientName:[{required:!0,message:"请输入客户端名称!"}],clientAuthenticationMethods:[{required:!0,message:"请选择验证方式!"}],authorizationGrantTypes:[{required:!0,message:"请选择授权方式!"}]}),F={[H.CREATE]:qe,[H.UPDATE]:Ee},{submitLoading:S,validateAndSubmit:I,resetFields:x,validateInfos:r}=be(U,F,o,w),u=()=>{var a;const i={...o};i.redirectUris=o.redirectUrisWithKey.map(h=>h.value),i.clientSettings=Object.assign({},i),i.tokenSettings=Object.assign({},i),i.scopeResources=(a=i.scopeResourceList)==null?void 0:a.join(","),delete i.scopeResources,delete i.scopeResourceList,delete i.requireProofKey,delete i.requireAuthorizationConsent,delete i.jwkSetUrl,delete i.signingAlgorithm,delete i.accessTokenTimeToLive,delete i.refreshTokenTimeToLive,delete i.authorizationCodeTimeToLive,delete i.reuseRefreshTokens,delete i.tokenFormat,delete i.idTokenSignatureAlgorithm,I(i,{onSuccess:()=>{T(),N("submit-success")}})},f=()=>{T(),S.value=!1};return y({open(i,a){var h;k(),x(),i===H.CREATE?R.value="客户端新建":(R.value="客户端修改",Ye(a==null?void 0:a.id).then(s=>{const M={...s.data,...s.data.clientSettings,...s.data.tokenSettings};ye(o,M,["redirectUris","clientSecret","clientSettings","tokenSettings"]),o.redirectUrisWithKey=M.redirectUris.map(q=>({value:q,key:new Date})),o.redirectUrisWithKey.length==0&&o.redirectUrisWithKey.push({value:"",key:new Date})}),o.scopeResourceList=(h=a==null?void 0:a.scopeResources)==null?void 0:h.split(",").map(Number)),U.value=i}}),(i,a)=>{const h=ve,s=me,M=Ke,q=xe,_=Me,P=ze,le=de,E=fe,Q=Be,A=De,j=Oe,W=ce,re=Le,ue=pe,se=Ue;return z(),D(se,{title:t(R),visible:t(g),"mask-closable":!1,width:"1000px","body-style":{paddingBottom:"8px"},"confirm-loading":t(S),onOk:u,onCancel:f},{default:n(()=>[e(ue,{model:t(o),"label-col":K,"wrapper-col":Y},{default:n(()=>[e(re,{gutter:16},{default:n(()=>[e(Q,{span:12},{default:n(()=>[e(E,{title:"客户端基本信息",bordered:!1},{default:n(()=>[t(m)?(z(),D(s,{key:0,style:{display:"none"}},{default:n(()=>[e(h,{value:t(o).id,"onUpdate:value":a[0]||(a[0]=l=>t(o).id=l)},null,8,["value"])]),_:1})):ae("",!0),e(s,p({label:"客户端ID"},t(r).clientId),{default:n(()=>[e(h,{value:t(o).clientId,"onUpdate:value":a[1]||(a[1]=l=>t(o).clientId=l),placeholder:"请输入"},null,8,["value"])]),_:1},16),e(s,p({label:"客户端ID生效时间"},t(r).clientIdIssuedAt),{default:n(()=>[e(M,{value:t(o).clientIdIssuedAt,"onUpdate:value":a[2]||(a[2]=l=>t(o).clientIdIssuedAt=l),"value-format":"YYYY-MM-DD HH:mm:ss","show-time":"",format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["value"])]),_:1},16),e(s,p({label:"客户端Secret"},t(r).clientSecret),{default:n(()=>[e(q,{value:t(o).clientSecret,"onUpdate:value":a[3]||(a[3]=l=>t(o).clientSecret=l),placeholder:"请输入"},null,8,["value"])]),_:1},16),e(s,p({label:"客户端Secret生效时间"},t(r).clientSecretExpiresAt),{default:n(()=>[e(M,{value:t(o).clientSecretExpiresAt,"onUpdate:value":a[4]||(a[4]=l=>t(o).clientSecretExpiresAt=l),"value-format":"YYYY-MM-DD HH:mm:ss","show-time":"",format:"YYYY-MM-DD HH:mm:ss",style:{width:"100%"}},null,8,["value"])]),_:1},16),e(s,p({label:"客户端名称"},t(r).clientName),{default:n(()=>[e(h,{value:t(o).clientName,"onUpdate:value":a[5]||(a[5]=l=>t(o).clientName=l),placeholder:"请输入"},null,8,["value"])]),_:1},16),e(s,p({label:"验证方式"},t(r).clientAuthenticationMethods),{default:n(()=>[e(P,{value:t(o).clientAuthenticationMethods,"onUpdate:value":a[6]||(a[6]=l=>t(o).clientAuthenticationMethods=l),mode:"multiple",placeholder:"请选择"},{default:n(()=>[e(_,{value:"client_secret_post"},{default:n(()=>[d("client_secret_post")]),_:1}),e(_,{value:"client_secret_basic"},{default:n(()=>[d("client_secret_basic")]),_:1})]),_:1},8,["value"])]),_:1},16),e(s,p({label:"授权方式"},t(r).authorizationGrantTypes),{default:n(()=>[e(P,{value:t(o).authorizationGrantTypes,"onUpdate:value":a[7]||(a[7]=l=>t(o).authorizationGrantTypes=l),mode:"multiple"},{default:n(()=>[e(_,{value:"authorization_code"},{default:n(()=>[d("authorization_code")]),_:1}),e(_,{value:"password"},{default:n(()=>[d("password")]),_:1}),e(_,{value:"client_credentials"},{default:n(()=>[d("client_credentials")]),_:1}),e(_,{value:"implicit"},{default:n(()=>[d("implicit")]),_:1}),e(_,{value:"refresh_token"},{default:n(()=>[d("refresh_token")]),_:1}),e(_,{value:"federated_identity"},{default:n(()=>[d("federated_identity")]),_:1})]),_:1},8,["value"])]),_:1},16),e(s,p({label:"作用域"},t(r).scopes),{default:n(()=>[e(P,{value:t(o).scopes,"onUpdate:value":a[8]||(a[8]=l=>t(o).scopes=l),mode:"tags"},{default:n(()=>[e(_,{value:"authority_info_claim"},{default:n(()=>[d("authority_info_claim")]),_:1}),e(_,{value:"user_info_claim"},{default:n(()=>[d("user_info_claim")]),_:1})]),_:1},8,["value"])]),_:1},16),(z(!0),we(Ie,null,Fe(t(o).redirectUrisWithKey,(l,$)=>(z(),D(s,{key:l.key,"wrapper-col":$===0?{}:L,label:$===0?"回调地址":"",name:["redirectUri",$,"value"]},{default:n(()=>[e(h,{value:l.value,"onUpdate:value":X=>l.value=X,placeholder:"请输入",style:{width:"90%","margin-right":"8px"}},null,8,["value","onUpdate:value"]),t(o).redirectUrisWithKey.length>1?(z(),D(t(Se),{key:0,class:"dynamic-delete-button",disabled:t(o).redirectUrisWithKey.length===1,onClick:X=>C(l)},null,8,["disabled","onClick"])):ae("",!0)]),_:2},1032,["wrapper-col","label","name"]))),128)),e(s,{"wrapper-col":L},{default:n(()=>[e(le,{type:"dashed",style:{width:"60%"},onClick:b},{default:n(()=>[e(t(Pe)),d(" Add field ")]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,{span:12},{default:n(()=>[e(E,{title:"客户端配置",bordered:!1},{default:n(()=>[e(s,p({label:"验证Key"},t(r).requireProofKey),{default:n(()=>[e(j,{value:t(o).requireProofKey,"onUpdate:value":a[9]||(a[9]=l=>t(o).requireProofKey=l),"button-style":"solid"},{default:n(()=>[e(A,{value:0},{default:n(()=>[d("关闭")]),_:1}),e(A,{value:1},{default:n(()=>[d("开启")]),_:1})]),_:1},8,["value"])]),_:1},16),e(s,p({label:"授权同意"},t(r).requireAuthorizationConsent),{default:n(()=>[e(j,{value:t(o).requireAuthorizationConsent,"onUpdate:value":a[10]||(a[10]=l=>t(o).requireAuthorizationConsent=l),"button-style":"solid"},{default:n(()=>[e(A,{value:0},{default:n(()=>[d("关闭")]),_:1}),e(A,{value:1},{default:n(()=>[d("开启")]),_:1})]),_:1},8,["value"])]),_:1},16),e(s,p({label:"JWKSet地址"},t(r).jwkSetUrl),{default:n(()=>[e(h,{value:t(o).jwkSetUrl,"onUpdate:value":a[11]||(a[11]=l=>t(o).jwkSetUrl=l),placeholder:"请输入"},null,8,["value"])]),_:1},16),e(s,p({label:"签名算法"},t(r).signingAlgorithm),{default:n(()=>[e(P,{value:t(o).signingAlgorithm,"onUpdate:value":a[12]||(a[12]=l=>t(o).signingAlgorithm=l),placeholder:"请选择"},{default:n(()=>[e(_,{value:"RS256"},{default:n(()=>[d("RS256")]),_:1})]),_:1},8,["value"])]),_:1},16)]),_:1}),e(E,{title:"令牌配置",bordered:!1},{default:n(()=>[e(s,p({label:"授权码有效时长"},t(r).authorizationCodeTimeToLive,{min:"0",step:"60"}),{default:n(()=>[e(W,{value:t(o).authorizationCodeTimeToLive,"onUpdate:value":a[13]||(a[13]=l=>t(o).authorizationCodeTimeToLive=l),placeholder:"请输入"},{addonAfter:n(()=>[d("秒")]),_:1},8,["value"])]),_:1},16),e(s,p({label:"访问令牌有效时长"},t(r).accessTokenTimeToLive,{min:"0",step:"60"}),{default:n(()=>[e(W,{value:t(o).accessTokenTimeToLive,"onUpdate:value":a[14]||(a[14]=l=>t(o).accessTokenTimeToLive=l),placeholder:"请输入"},{addonAfter:n(()=>[d("秒")]),_:1},8,["value"])]),_:1},16),e(s,p({label:"刷新令牌有效时长"},t(r).refreshTokenTimeToLive),{default:n(()=>[e(W,{value:t(o).refreshTokenTimeToLive,"onUpdate:value":a[15]||(a[15]=l=>t(o).refreshTokenTimeToLive=l),placeholder:"请输入",min:"0",step:"60"},{addonAfter:n(()=>[d("秒")]),_:1},8,["value"])]),_:1},16),e(s,p({label:"刷新令牌复用"},t(r).reuseRefreshTokens),{default:n(()=>[e(j,{value:t(o).reuseRefreshTokens,"onUpdate:value":a[16]||(a[16]=l=>t(o).reuseRefreshTokens=l),"button-style":"solid"},{default:n(()=>[e(A,{value:0},{default:n(()=>[d("关闭")]),_:1}),e(A,{value:1},{default:n(()=>[d("开启")]),_:1})]),_:1},8,["value"])]),_:1},16),e(s,p({label:"令牌格式"},t(r).tokenFormat),{default:n(()=>[e(P,{value:t(o).tokenFormat,"onUpdate:value":a[17]||(a[17]=l=>t(o).tokenFormat=l),placeholder:"请选择"},{default:n(()=>[e(_,{value:"reference"},{default:n(()=>[d("不透明令牌")]),_:1}),e(_,{value:"jwt"},{default:n(()=>[d("JWT令牌")]),_:1})]),_:1},8,["value"])]),_:1},16),e(s,p({label:"IDToken签名算法"},t(r).idTokenSignatureAlgorithm),{default:n(()=>[e(P,{value:t(o).idTokenSignatureAlgorithm,"onUpdate:value":a[18]||(a[18]=l=>t(o).idTokenSignatureAlgorithm=l),placeholder:"请选择"},{default:n(()=>[e(_,{value:"RS256"},{default:n(()=>[d("RS256")]),_:1})]),_:1},8,["value"])]),_:1},16)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","visible","confirm-loading"])}}});export{Ct as _,kt as p,Tt as r};
