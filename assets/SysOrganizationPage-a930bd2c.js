/* empty css                */import{D as G}from"./index-4e866bcb.js";/* empty css              */import{B as H}from"./index-cf5fb184.js";import{_ as J}from"./index-4948e659.js";import{_ as Q}from"./index-da51896f.js";import"./index-4f3b583f.js";import{P as X}from"./Table-804cc6fe.js";import{_ as Z}from"./SysOrganizationFormModal.vue_vue_type_script_setup_true_lang-5f072137.js";import{u as ee}from"./permission-a42399ff.js";import{l as te,r as oe,a as ae}from"./index-8c05ae55.js";import{l as ne,p as ie,m as re}from"./index-d8cf9b9f.js";import{F as T}from"./form-d9144801.js";import{d as N}from"./request-b908f567.js";import{_ as se}from"./Search-cfb19401.js";import"./index-bd4b6c28.js";import{_ as me}from"./VerticalAlignMiddleOutlined-1fbd9b6a.js";import{_ as pe,a as ce}from"./InteractionOutlined-90a107b4.js";import{d as le,R as d,L as _e,N as de,o as t,a6 as m,a as p,w as s,a5 as l,u as i,W as P,c as u,ad as x,a1 as B,F as w,ac as h,a7 as D,a8 as ue,a9 as fe,aj as ye}from"./runtime-core.esm-bundler-e620233b.js";import{_ as ge}from"./PlusOutlined-6c7b8f6a.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";import"./useConfigInject-4e7e38f3.js";import"./AntdIcon-50c809c3.js";import"./wave-9bd9da2d.js";import"./index-78dc20df.js";import"./useMergedState-49e4ba80.js";import"./KeyCode-e7009ae3.js";import"./isEqual-0db96e75.js";import"./isObject-df4d31a6.js";import"./vnode-695e877b.js";import"./index-86e42ee6.js";import"./index-b25e5e27.js";import"./styleChecker-cd40cf0f.js";import"./index-64985671.js";import"./FormItemContext-d1513cce.js";import"./index-5a8c2e19.js";import"./index-c9d35858.js";import"./index-51c9200e.js";import"./debounce-ec6630b4.js";import"./isMobile-8885869a.js";import"./collapseMotion-49c35061.js";import"./useState-6ab94c07.js";import"./index-fd0b6746.js";import"./iconUtil-13917c84.js";import"./toArray-03f06280.js";import"./pickAttrs-a6ea96de.js";import"./List-f67cc211.js";import"./DownOutlined-1df0e7ad.js";import"./SearchOutlined-2febc2d4.js";import"./useMemo-4a215623.js";import"./zh_CN-1ca40490.js";import"./index-a6c0766c.js";import"./RouteContext-d0ba1c8a.js";import"./index-4b83e0fe.js";/* empty css              */import"./index-daa4fc82.js";import"./iconUtil-00aaf9c6.js";import"./CaretDownFilled-5dd372a5.js";import"./FolderOutlined-b28123ef.js";import"./index-54e1cd75.js";import"./index-d551a8fd.js";import"./Checkbox-e087e583.js";import"./index-6d8533be.js";import"./index-e1aeaf6d.js";import"./TextArea-c870182f.js";import"./index-af58b3ad.js";import"./Spin-99a3053a.js";import"./index-2ae081eb.js";import"./RadioButton-65a1cb88.js";/* empty css              */import"./index-5d5b84ea.js";import"./UpOutlined-2842b6e3.js";import"./SysOrganizationTreeSelect.vue_vue_type_script_setup_true_lang-e554d1d9.js";import"./index-d825368e.js";/* empty css              */import"./modal-94b635e5.js";import"./bean-utils-948c4eb4.js";import"./array-utils-d1025e0b.js";import"./vue-router-ecc405fe.js";import"./_commonjsHelpers-c45321e7.js";import"./constants-2bea6948.js";import"./Password-b11b167b.js";import"./EyeInvisibleOutlined-44fbb38d.js";const ve=f=>(ue("data-v-49af24d8"),f=f(),fe(),f),ke=["onClick"],xe={key:1,class:"expandIcon leafNode"},we={key:0},Ce={style:{color:"#f50"}},ze={key:1},Re=["onClick"],Oe=ve(()=>D("a",{href:"javascript:",class:"ballcat-text-danger"},"删除",-1)),Se={name:"SysOrganizationPage"},be=le({...Se,setup(f){const{hasPermission:C}=ee(),z=d(),v=d(),_=d([]),c=d([]),k=_e({data:{records:[]}}),o=d(""),R=e=>e.name.indexOf(o.value)>-1;de(()=>[_.value,o.value],()=>{const e=ie(_.value,R);k.data.records=e,o.value?c.value=re(e,R):c.value.length==0&&(c.value=e.map(r=>r.id))});const E=async()=>te().then(e=>(_.value=ne(e.data,0),k.data.records=_.value,k)),y=e=>{var r,g;(g=(r=z.value)==null?void 0:r.actionRef)==null||g.reload(e)},M=()=>{y(!0)},A=()=>{v.value.open(T.CREATE)},F=e=>{v.value.open(T.UPDATE,e)},U=e=>{N(oe(e.id),{successMessage:"删除成功！",onSuccess:()=>y()})},V=()=>{N(ae(),{successMessage:"层级校正成功",onSuccess:()=>y()})},q=[{title:"组织架构层级",width:250,dataIndex:"name"},{title:"排序",width:80,dataIndex:"sort"},{title:"备注信息",dataIndex:"remarks",width:200,ellipsis:!0},{title:"创建时间",dataIndex:"createTime",width:150},{key:"operate",title:"操作",align:"center",width:120}];return(e,r)=>{const g=se,j=Q,K=me,$=pe,L=ce,O=H,S=J,W=ge,Y=G,b=ye("has");return t(),m(w,null,[p(i(X),{ref_key:"tableRef",ref:z,"expanded-row-keys":i(c),"onUpdate:expanded-row-keys":r[1]||(r[1]=a=>P(c)?c.value=a:null),"row-key":"id",request:E,columns:q,pagination:!1,scroll:{x:800}},{headerTitle:s(()=>[p(j,{size:24},{default:s(()=>[l(" 组织架构 "),p(g,{value:i(o),"onUpdate:value":r[0]||(r[0]=a=>P(o)?o.value=a:null),placeholder:"组织名称","allow-clear":"",onSearch:M},null,8,["value"])]),_:1})]),expandIcon:s(a=>{var n;return[((n=a.record.children)==null?void 0:n.length)>0?(t(),m("span",{key:0,class:"expandIcon",onClick:I=>a.onExpand(a.record,I)},[a.expanded?(t(),u(K,{key:0})):(t(),u($,{key:1}))],8,ke)):(t(),m("span",xe))]}),toolBarRender:s(()=>[i(C)("system:organization:revised")?(t(),u(S,{key:0,title:"是否确认进行校正操作?","ok-text":"Yes","cancel-text":"No",onConfirm:V},{default:s(()=>[p(O,{type:"primary",danger:""},{default:s(()=>[p(L),l("校正层级深度")]),_:1})]),_:1})):x("",!0),B((t(),u(O,{type:"primary",onClick:A},{default:s(()=>[p(W),l(" 新建 ")]),_:1})),[[b,"system:organization:add"]])]),bodyCell:s(({column:a,record:n})=>[a.key==="name"?(t(),m(w,{key:0},[n.name.indexOf(i(o))>-1?(t(),m("span",we,[l(h(n.name.substring(0,n.name.indexOf(i(o))))+" ",1),D("span",Ce,h(i(o)),1),l(" "+h(n.name.substring(n.name.indexOf(i(o))+i(o).length)),1)])):(t(),m("span",ze,h(n.name),1))],64)):a.key==="operate"?(t(),m(w,{key:1},[B((t(),m("a",{onClick:I=>F(n)},[l("修改")],8,Re)),[[b,"system:organization:edit"]]),p(Y,{type:"vertical"}),i(C)("system:organization:del")?(t(),u(S,{key:0,title:"确认要删除吗？",onConfirm:()=>U(n)},{default:s(()=>[Oe]),_:2},1032,["onConfirm"])):x("",!0)],64)):x("",!0)]),_:1},8,["expanded-row-keys"]),p(Z,{ref_key:"fromModalRef",ref:v,"organization-tree":i(_),onSubmitSuccess:y},null,8,["organization-tree"])],64)}}});const no=he(be,[["__scopeId","data-v-49af24d8"]]);export{no as default};
