/* empty css                *//* empty css              */import"./index-cf5fb184.js";/* empty css              */import{_ as M}from"./index-4948e659.js";import{P as B}from"./Table-804cc6fe.js";import{_ as N}from"./SysRoleUserSearch.vue_vue_type_script_setup_true_lang-e3a6633f.js";import{u as U}from"./modal-94b635e5.js";import{u as q}from"./permission-a42399ff.js";import{m as z}from"./page-utils-8286cd0a.js";import{b as S,d as T}from"./index-2012180d.js";import{d as V}from"./request-b908f567.js";import{d as F,R as i,o as d,c as p,w as c,a as f,u as o,a6 as $,ad as _,F as j,a7 as A}from"./runtime-core.esm-bundler-e620233b.js";import{M as D}from"./index-d8cf9b9f.js";const E=A("a",{href:"javascript:",class:"ballcat-text-danger"},"解绑",-1),L={name:"SysRoleUserModal"},ne=F({...L,setup(G,{expose:b}){const{hasPermission:g}=q(),s=i(),{visible:h,openModal:x,closeModal:y}=U(),k=i(!1),t=i("");let m={};const v=(e,r,a)=>{if(!t.value)return Promise.resolve([]);const l=z(e,r,a);return S({...l,...m,roleCode:t.value})},n=e=>{var r,a;(a=(r=s.value)==null?void 0:r.actionRef)==null||a.reload(e)},C=e=>{m=e,n(!0)},w=e=>{V(T(e.userId,t.value),{successMessage:"解绑成功！",onSuccess:()=>n()})},R=[{title:"用户ID",dataIndex:"userId",width:"45px"},{title:"用户名",dataIndex:"username",width:"45px"},{title:"昵称",dataIndex:"nickname",width:"45px"},{title:"组织机构",dataIndex:"organizationName",width:"45px"},{key:"operate",title:"操作",align:"center",width:50}];return b({open(e){x(),t.value=e.code,n(!0)}}),(e,r)=>{const a=M,l=D;return d(),p(l,{title:"角色已绑用户",visible:o(h),"mask-closable":!1,"body-style":{padding:"16px 24px"},"confirm-loading":o(k),footer:null,width:900,centered:!0,onCancel:o(y)},{default:c(()=>{var u;return[f(N,{"role-code":o(t),loading:(u=o(s))==null?void 0:u.loading,onSearch:C},null,8,["role-code","loading"]),f(o(B),{ref_key:"tableRef",ref:s,"row-key":"userId",request:v,columns:R,"lazy-load":!0,"tool-bar-render":!1,"card-props":!1},{bodyCell:c(({column:I,record:P})=>[I.key==="operate"?(d(),$(j,{key:0},[o(g)("system:user:grant")?(d(),p(a,{key:0,title:"确认要解绑吗？",onConfirm:H=>w(P)},{default:c(()=>[E]),_:2},1032,["onConfirm"])):_("",!0)],64)):_("",!0)]),_:1},512)]}),_:1},8,["visible","confirm-loading","onCancel"])}}});export{ne as _};
