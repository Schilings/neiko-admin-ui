import{j as L,e as J,J as K,a as o,_ as y,P as U}from"./useConfigInject-4e7e38f3.js";import{u as V}from"./index-5a8c2e19.js";import{r as X}from"./index-64985671.js";import{R as q}from"./index-86e42ee6.js";import{u as D}from"./index-51c9200e.js";import{e as G}from"./CaretDownFilled-5dd372a5.js";import{d as Q,R as d,K as Y,N as O,_ as A,O as Z,a as g}from"./runtime-core.esm-bundler-e620233b.js";var ee=function(){return{prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:function(){return"default"}},src:String,srcset:String,icon:U.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}},ae=Q({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:ee(),slots:["icon"],setup:function(e,E){var x=E.slots,m=E.attrs,p=d(!0),_=d(!1),h=d(1),S=d(null),z=d(null),R=L("avatar",e),I=R.prefixCls,W=D(),n=Y(function(){return e.size==="default"?W.value:e.size}),k=V(),l=G(function(){if(J(e.size)==="object"){var r=X.find(function(t){return k.value[t]}),a=e.size[r];return a}}),N=function(a){return l.value?{width:"".concat(l.value,"px"),height:"".concat(l.value,"px"),lineHeight:"".concat(l.value,"px"),fontSize:"".concat(a?l.value/2:18,"px")}:{}},b=function(){if(!(!S.value||!z.value)){var a=S.value.offsetWidth,t=z.value.offsetWidth;if(a!==0&&t!==0){var c=e.gap,u=c===void 0?4:c;u*2<t&&(h.value=t-u*2<a?(t-u*2)/a:1)}}},T=function(){var a=e.loadError,t=a==null?void 0:a();t!==!1&&(p.value=!1)};return O(function(){return e.src},function(){A(function(){p.value=!0,h.value=1})}),O(function(){return e.gap},function(){A(function(){b()})}),Z(function(){A(function(){b(),_.value=!0})}),function(){var r,a,t=e.shape,c=e.src,u=e.alt,$=e.srcset,P=e.draggable,w=e.crossOrigin,v=K(x,e,"icon"),s=I.value,B=(r={},o(r,"".concat(m.class),!!m.class),o(r,s,!0),o(r,"".concat(s,"-lg"),n.value==="large"),o(r,"".concat(s,"-sm"),n.value==="small"),o(r,"".concat(s,"-").concat(t),t),o(r,"".concat(s,"-image"),c&&p.value),o(r,"".concat(s,"-icon"),v),r),H=typeof n.value=="number"?{width:"".concat(n.value,"px"),height:"".concat(n.value,"px"),lineHeight:"".concat(n.value,"px"),fontSize:v?"".concat(n.value/2,"px"):"18px"}:{},j=(a=x.default)===null||a===void 0?void 0:a.call(x),f;if(c&&p.value)f=g("img",{draggable:P,src:c,srcset:$,onError:T,alt:u,crossorigin:w},null);else if(v)f=v;else if(_.value||h.value!==1){var C="scale(".concat(h.value,") translateX(-50%)"),M={msTransform:C,WebkitTransform:C,transform:C},F=typeof n.value=="number"?{lineHeight:"".concat(n.value,"px")}:{};f=g(q,{onResize:b},{default:function(){return[g("span",{class:"".concat(s,"-string"),ref:S,style:y(y({},F),M)},[j])]}})}else f=g("span",{class:"".concat(s,"-string"),ref:S,style:{opacity:0}},[j]);return g("span",y(y({},m),{},{ref:z,class:B,style:[H,N(!!v),m.style]}),[f])}}});const ue=ae;const ve=(i,e="https://hccake-img.oss-cn-shanghai.aliyuncs.com")=>{if(!(!i||i.length===0))return i.startsWith("/")?`${e}${i}`:`${e}/${i}`};export{ue as A,ve as f};
