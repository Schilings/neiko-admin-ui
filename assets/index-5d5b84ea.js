import{a as g,h as P,_ as N,X as Pe,e as Te,f as qe,k as we,p as He,j as ze,P as ve}from"./useConfigInject-4e7e38f3.js";import{_ as Ue}from"./UpOutlined-2842b6e3.js";import{D as Ke}from"./DownOutlined-1df0e7ad.js";import{_ as De,a as Ce}from"./index-b25e5e27.js";import{i as Oe}from"./isMobile-8885869a.js";import{d as ge,R as D,a0 as _e,a as y,K as ue,N as Y}from"./runtime-core.esm-bundler-e620233b.js";import{w as Ne}from"./wave-9bd9da2d.js";import{K as oe}from"./KeyCode-e7009ae3.js";import{u as Ge}from"./FormItemContext-d1513cce.js";import{c as je}from"./vnode-695e877b.js";import{o as We}from"./styleChecker-cd40cf0f.js";function me(){return typeof BigInt=="function"}function J(a){var e=a.trim(),t=e.startsWith("-");t&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var o=e||"0",v=o.split("."),s=v[0]||"0",d=v[1]||"0";s==="0"&&d==="0"&&(t=!1);var f=t?"-":"";return{negative:t,negativeStr:f,trimStr:o,integerStr:s,decimalStr:d,fullStr:"".concat(f).concat(o)}}function Se(a){var e=String(a);return!Number.isNaN(Number(e))&&e.includes("e")}function Q(a){var e=String(a);if(Se(a)){var t=Number(e.slice(e.indexOf("e-")+2)),o=e.match(/\.(\d+)/);return o!=null&&o[1]&&(t+=o[1].length),t}return e.includes(".")&&he(e)?e.length-e.indexOf(".")-1:0}function be(a){var e=String(a);if(Se(a)){if(a>Number.MAX_SAFE_INTEGER)return String(me()?BigInt(a).toString():Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return String(me()?BigInt(a).toString():Number.MIN_SAFE_INTEGER);e=a.toFixed(Q(e))}return J(e).fullStr}function he(a){return typeof a=="number"?!Number.isNaN(a):a?/^\s*-?\d+(\.\d+)?\s*$/.test(a)||/^\s*-?\d+\.\s*$/.test(a)||/^\s*-?\.\d+\s*$/.test(a):!1}var Le=function(){function a(e){if(Ce(this,a),g(this,"origin",""),!e&&e!==0||!String(e).trim()){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return De(a,[{key:"negate",value:function(){return new a(-this.toNumber())}},{key:"add",value:function(t){if(this.isInvalidate())return new a(t);var o=Number(t);if(Number.isNaN(o))return this;var v=this.number+o;if(v>Number.MAX_SAFE_INTEGER)return new a(Number.MAX_SAFE_INTEGER);if(v<Number.MIN_SAFE_INTEGER)return new a(Number.MIN_SAFE_INTEGER);var s=Math.max(Q(this.number),Q(o));return new a(v.toFixed(s))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toNumber()===(t==null?void 0:t.toNumber())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":be(this.number):this.origin}}]),a}(),Xe=function(){function a(e){if(Ce(this,a),g(this,"origin",""),!e&&e!==0||!String(e).trim()){this.empty=!0;return}if(this.origin=String(e),e==="-"){this.nan=!0;return}var t=e;if(Se(t)&&(t=Number(t)),t=typeof t=="string"?t:be(t),he(t)){var o=J(t);this.negative=o.negative;var v=o.trimStr.split(".");this.integer=BigInt(v[0]);var s=v[1]||"0";this.decimal=BigInt(s),this.decimalLen=s.length}else this.nan=!0}return De(a,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(t){var o="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(t,"0"));return BigInt(o)}},{key:"negate",value:function(){var t=new a(this.toString());return t.negative=!t.negative,t}},{key:"add",value:function(t){if(this.isInvalidate())return new a(t);var o=new a(t);if(o.isInvalidate())return this;var v=Math.max(this.getDecimalStr().length,o.getDecimalStr().length),s=this.alignDecimal(v),d=o.alignDecimal(v),f=(s+d).toString(),c=J(f),p=c.negativeStr,m=c.trimStr,i="".concat(p).concat(m.padStart(v+1,"0"));return new a("".concat(i.slice(0,-v),".").concat(i.slice(-v)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(t){return this.toString()===(t==null?void 0:t.toString())}},{key:"lessEquals",value:function(t){return this.add(t.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return t?this.isInvalidate()?"":J("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),a}();function k(a){return me()?new Xe(a):new Le(a)}function pe(a,e,t){if(a==="")return"";var o=J(a),v=o.negativeStr,s=o.integerStr,d=o.decimalStr,f="".concat(e).concat(d),c="".concat(v).concat(s);if(t>=0){var p=Number(d[t]);if(p>=5){var m=k(a).add("".concat(v,"0.").concat("0".repeat(t)).concat(10-p));return pe(m.toString(),e,t)}return t===0?c:"".concat(c).concat(e).concat(d.padEnd(t,"0").slice(0,t))}return f===".0"?c:"".concat(c).concat(f)}var Ye=200,Je=600;const Qe=ge({compatConfig:{MODE:3},name:"StepHandler",inheritAttrs:!1,props:{prefixCls:String,upDisabled:Boolean,downDisabled:Boolean,onStep:{type:Function}},slots:["upNode","downNode"],setup:function(e,t){var o=t.slots,v=t.emit,s=D(),d=function(p,m){p.preventDefault(),v("step",m);function i(){v("step",m),s.value=setTimeout(i,Ye)}s.value=setTimeout(i,Je)},f=function(){clearTimeout(s.value)};return _e(function(){f()}),function(){if(Oe())return null;var c=e.prefixCls,p=e.upDisabled,m=e.downDisabled,i="".concat(c,"-handler"),B=P(i,"".concat(i,"-up"),g({},"".concat(i,"-up-disabled"),p)),V=P(i,"".concat(i,"-down"),g({},"".concat(i,"-down-disabled"),m)),C={unselectable:"on",role:"button",onMouseup:f,onMouseleave:f},x=o.upNode,A=o.downNode;return y("div",{class:"".concat(i,"-wrap")},[y("span",N(N({},C),{},{onMousedown:function(_){d(_,!0)},"aria-label":"Increase Value","aria-disabled":p,class:B}),[(x==null?void 0:x())||y("span",{unselectable:"on",class:"".concat(c,"-handler-up-inner")},null)]),y("span",N(N({},C),{},{onMousedown:function(_){d(_,!1)},"aria-label":"Decrease Value","aria-disabled":m,class:V}),[(A==null?void 0:A())||y("span",{unselectable:"on",class:"".concat(c,"-handler-down-inner")},null)])])}}});function Ze(a,e){var t=D(null);function o(){try{var s=a.value,d=s.selectionStart,f=s.selectionEnd,c=s.value,p=c.substring(0,d),m=c.substring(f);t.value={start:d,end:f,value:c,beforeTxt:p,afterTxt:m}}catch{}}function v(){if(a.value&&t.value&&e.value)try{var s=a.value.value,d=t.value,f=d.beforeTxt,c=d.afterTxt,p=d.start,m=s.length;if(s.endsWith(c))m=s.length-t.value.afterTxt.length;else if(s.startsWith(f))m=f.length;else{var i=f[p-1],B=s.indexOf(i,p-1);B!==-1&&(m=B+1)}a.value.setSelectionRange(m,m)}catch(V){Pe(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(V.message))}}return[o,v]}const et=function(){var a=D(0),e=function(){Ne.cancel(a.value)};return _e(function(){e()}),function(t){e(),a.value=Ne(function(){t()})}};var tt=["prefixCls","min","max","step","defaultValue","value","disabled","readonly","keyboard","controls","autofocus","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","lazy","class","style"],Ie=function(e,t){return e||t.isEmpty()?t.toString():t.toNumber()},xe=function(e){var t=k(e);return t.isInvalidate()?null:t},Me=function(){return{stringMode:{type:Boolean},defaultValue:{type:[String,Number]},value:{type:[String,Number]},prefixCls:{type:String},min:{type:[String,Number]},max:{type:[String,Number]},step:{type:[String,Number],default:1},tabindex:{type:Number},controls:{type:Boolean,default:!0},readonly:{type:Boolean},disabled:{type:Boolean},autofocus:{type:Boolean},keyboard:{type:Boolean,default:!0},parser:{type:Function},formatter:{type:Function},precision:{type:Number},decimalSeparator:{type:String},onInput:{type:Function},onChange:{type:Function},onPressEnter:{type:Function},onStep:{type:Function},onBlur:{type:Function},onFocus:{type:Function}}};const nt=ge({compatConfig:{MODE:3},name:"InnerInputNumber",inheritAttrs:!1,props:N(N({},Me()),{},{lazy:Boolean}),slots:["upHandler","downHandler"],setup:function(e,t){var o=t.attrs,v=t.slots,s=t.emit,d=t.expose,f=D(),c=D(!1),p=D(!1),m=D(!1),i=D(k(e.value));function B(u){e.value===void 0&&(i.value=u)}var V=function(n,l){if(!l)return e.precision>=0?e.precision:Math.max(Q(n),Q(e.step))},C=function(n){var l=String(n);if(e.parser)return e.parser(l);var r=l;return e.decimalSeparator&&(r=r.replace(e.decimalSeparator,".")),r.replace(/[^\w.-]+/g,"")},x=D(""),A=function(n,l){if(e.formatter)return e.formatter(n,{userTyping:l,input:String(x.value)});var r=typeof n=="number"?be(n):n;if(!l){var I=V(r,l);if(he(r)&&(e.decimalSeparator||I>=0)){var h=e.decimalSeparator||".";r=pe(r,h,I)}}return r},O=function(){var u=e.value;return i.value.isInvalidate()&&["string","number"].includes(Te(u))?Number.isNaN(u)?"":u:A(i.value.toString(),!1)}();x.value=O;function _(u,n){x.value=A(u.isInvalidate()?u.toString(!1):u.toString(!n),n)}var R=ue(function(){return xe(e.max)}),E=ue(function(){return xe(e.min)}),b=ue(function(){return!R.value||!i.value||i.value.isInvalidate()?!1:R.value.lessEquals(i.value)}),T=ue(function(){return!E.value||!i.value||i.value.isInvalidate()?!1:i.value.lessEquals(E.value)}),F=Ze(f,c),w=qe(F,2),q=w[0],Z=w[1],H=function(n){return R.value&&!n.lessEquals(R.value)?R.value:E.value&&!E.value.lessEquals(n)?E.value:null},z=function(n){return!H(n)},U=function(n,l){var r=n,I=z(r)||r.isEmpty();if(!r.isEmpty()&&!l&&(r=H(r)||r,I=!0),!e.readonly&&!e.disabled&&I){var h=r.toString(),M=V(h,l);if(M>=0&&(r=k(pe(h,".",M))),!r.equals(i.value)){var $;B(r),($=e.onChange)===null||$===void 0||$.call(e,r.isEmpty()?null:Ie(e.stringMode,r)),e.value===void 0&&_(r,l)}return r}return i.value},G=et(),j=function u(n){var l;if(q(),x.value=n,!m.value){var r=C(n),I=k(r);I.isNaN()||U(I,!0)}(l=e.onInput)===null||l===void 0||l.call(e,n),G(function(){var h=n;e.parser||(h=n.replace(/。/g,".")),h!==n&&u(h)})},W=function(){m.value=!0},ee=function(){m.value=!1,j(f.value.value)},L=function(n){j(n.target.value)},X=function(n){var l,r;if(!(n&&b.value||!n&&T.value)){p.value=!1;var I=k(e.step);n||(I=I.negate());var h=(i.value||k(0)).add(I.toString()),M=U(h,!1);(l=e.onStep)===null||l===void 0||l.call(e,Ie(e.stringMode,M),{offset:e.step,type:n?"up":"down"}),(r=f.value)===null||r===void 0||r.focus()}},te=function(n){var l=k(C(x.value)),r=l;l.isNaN()?r=i.value:r=U(l,n),e.value!==void 0?_(i.value,!1):r.isNaN()||_(r,!1)},le=function(n){var l=n.which;if(p.value=!0,l===oe.ENTER){var r;m.value||(p.value=!1),te(!1),(r=e.onPressEnter)===null||r===void 0||r.call(e,n)}e.keyboard!==!1&&!m.value&&[oe.UP,oe.DOWN].includes(l)&&(X(oe.UP===l),n.preventDefault())},S=function(){p.value=!1},K=function(n){te(!1),c.value=!1,p.value=!1,s("blur",n)};return Y(function(){return e.precision},function(){i.value.isInvalidate()||_(i.value,!1)},{flush:"post"}),Y(function(){return e.value},function(){var u=k(e.value);i.value=u;var n=k(C(x.value));(!u.equals(n)||!p.value||e.formatter)&&_(u,p.value)},{flush:"post"}),Y(x,function(){e.formatter&&Z()},{flush:"post"}),Y(function(){return e.disabled},function(u){u&&(c.value=!1)}),d({focus:function(){var n;(n=f.value)===null||n===void 0||n.focus()},blur:function(){var n;(n=f.value)===null||n===void 0||n.blur()}}),function(){var u,n=N(N({},o),e),l=n.prefixCls,r=l===void 0?"rc-input-number":l,I=n.min,h=n.max,M=n.step,$=M===void 0?1:M;n.defaultValue,n.value;var ne=n.disabled,ae=n.readonly;n.keyboard;var re=n.controls,se=re===void 0?!0:re,ie=n.autofocus;n.stringMode,n.parser,n.formatter,n.precision,n.decimalSeparator,n.onChange,n.onInput,n.onPressEnter,n.onStep;var Be=n.lazy,Ve=n.class,ke=n.style,Fe=we(n,tt),Ae=v.upHandler,$e=v.downHandler,ye="".concat(r,"-input"),ce={};return Be?ce.onChange=L:ce.onInput=L,y("div",{class:P(r,Ve,(u={},g(u,"".concat(r,"-focused"),c.value),g(u,"".concat(r,"-disabled"),ne),g(u,"".concat(r,"-readonly"),ae),g(u,"".concat(r,"-not-a-number"),i.value.isNaN()),g(u,"".concat(r,"-out-of-range"),!i.value.isInvalidate()&&!z(i.value)),u)),style:ke,onKeydown:le,onKeyup:S},[se&&y(Qe,{prefixCls:r,upDisabled:b.value,downDisabled:T.value,onStep:X},{upNode:Ae,downNode:$e}),y("div",{class:"".concat(ye,"-wrap")},[y("input",N(N(N({autofocus:ie,autocomplete:"off",role:"spinbutton","aria-valuemin":I,"aria-valuemax":h,"aria-valuenow":i.value.isInvalidate()?null:i.value.toString(),step:$},Fe),{},{ref:f,class:ye,value:x.value,disabled:ne,readonly:ae,onFocus:function(Re){c.value=!0,s("focus",Re)}},ce),{},{onBlur:K,onCompositionstart:W,onCompositionend:ee}),null)])])}}});function fe(a){return a!=null}var at=["class","bordered","readonly","style","addonBefore","addonAfter","prefix","valueModifiers"],Ee=Me(),rt=function(){return N(N({},Ee),{},{size:{type:String},bordered:{type:Boolean,default:!0},placeholder:String,name:String,id:String,type:String,addonBefore:ve.any,addonAfter:ve.any,prefix:ve.any,"onUpdate:value":Ee.onChange,valueModifiers:Object})},de=ge({compatConfig:{MODE:3},name:"AInputNumber",inheritAttrs:!1,props:rt(),slots:["addonBefore","addonAfter","prefix"],setup:function(e,t){var o=t.emit,v=t.expose,s=t.attrs,d=t.slots,f=Ge(),c=ze("input-number",e),p=c.prefixCls,m=c.size,i=c.direction,B=D(e.value===void 0?e.defaultValue:e.value),V=D(!1);Y(function(){return e.value},function(){B.value=e.value});var C=D(null),x=function(){var b;(b=C.value)===null||b===void 0||b.focus()},A=function(){var b;(b=C.value)===null||b===void 0||b.blur()};v({focus:x,blur:A});var O=function(b){e.value===void 0&&(B.value=b),o("update:value",b),o("change",b),f.onFieldChange()},_=function(b){V.value=!1,o("blur",b),f.onFieldBlur()},R=function(b){V.value=!0,o("focus",b)};return function(){var E,b,T,F,w=N(N({},s),e),q=w.class,Z=w.bordered,H=w.readonly,z=w.style,U=w.addonBefore,G=U===void 0?(E=d.addonBefore)===null||E===void 0?void 0:E.call(d):U,j=w.addonAfter,W=j===void 0?(b=d.addonAfter)===null||b===void 0?void 0:b.call(d):j,ee=w.prefix,L=ee===void 0?(T=d.prefix)===null||T===void 0?void 0:T.call(d):ee,X=w.valueModifiers,te=X===void 0?{}:X,le=we(w,at),S=p.value,K=m.value,u=P((F={},g(F,"".concat(S,"-lg"),K==="large"),g(F,"".concat(S,"-sm"),K==="small"),g(F,"".concat(S,"-rtl"),i.value==="rtl"),g(F,"".concat(S,"-readonly"),H),g(F,"".concat(S,"-borderless"),!Z),F),q),n=y(nt,N(N({},We(le,["size","defaultValue"])),{},{ref:C,lazy:!!te.lazy,value:B.value,class:u,prefixCls:S,readonly:H,onChange:O,onBlur:_,onFocus:R}),{upHandler:function(){return y(Ue,{class:"".concat(S,"-handler-up-inner")},null)},downHandler:function(){return y(Ke,{class:"".concat(S,"-handler-down-inner")},null)}}),l=fe(G)||fe(W);if(fe(L)){var r,I=P("".concat(S,"-affix-wrapper"),(r={},g(r,"".concat(S,"-affix-wrapper-focused"),V.value),g(r,"".concat(S,"-affix-wrapper-disabled"),e.disabled),g(r,"".concat(S,"-affix-wrapper-rtl"),i.value==="rtl"),g(r,"".concat(S,"-affix-wrapper-readonly"),H),g(r,"".concat(S,"-affix-wrapper-borderless"),!Z),g(r,"".concat(q),!l&&q),r));n=y("div",{class:I,style:z,onMouseup:function(){return C.value.focus()}},[y("span",{class:"".concat(S,"-prefix")},[L]),n])}if(l){var h,M="".concat(S,"-group"),$="".concat(M,"-addon"),ne=G?y("div",{class:$},[G]):null,ae=W?y("div",{class:$},[W]):null,re=P("".concat(S,"-wrapper"),M,g({},"".concat(M,"-rtl"),i.value==="rtl")),se=P("".concat(S,"-group-wrapper"),(h={},g(h,"".concat(S,"-group-wrapper-sm"),K==="small"),g(h,"".concat(S,"-group-wrapper-lg"),K==="large"),g(h,"".concat(S,"-group-wrapper-rtl"),i.value==="rtl"),h),q);n=y("div",{class:se,style:z},[y("div",{class:re},[ne,n,ae])])}return je(n,{style:z})}}});const St=He(de,{install:function(e){return e.component(de.name,de),e}});export{St as _};
