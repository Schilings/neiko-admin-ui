import{_ as b,P as v,k as te,h as se,a as j,i as we,F as Ee,H as be,j as xe,x as le,J as re,l as Me}from"./useConfigInject-4e7e38f3.js";import{g as Te,P as Le}from"./index-d8cf9b9f.js";import{K as Ve,s as Be}from"./KeyCode-e7009ae3.js";import{o as ge}from"./styleChecker-cd40cf0f.js";import{d as ce,L as Ae,R as T,O as Ce,_ as ee,N as X,P as ke,K,a as S,J as Fe,M as je}from"./runtime-core.esm-bundler-e620233b.js";var Se=function(){return{prefixCls:String,width:v.oneOfType([v.string,v.number]),height:v.oneOfType([v.string,v.number]),style:{type:Object,default:void 0},class:String,placement:{type:String},wrapperClassName:String,level:{type:[String,Array]},levelMove:{type:[Number,Function,Array]},duration:String,ease:String,showMask:{type:Boolean,default:void 0},maskClosable:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},afterVisibleChange:Function,keyboard:{type:Boolean,default:void 0},contentWrapperStyle:{type:Object,default:void 0},autofocus:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0}}},He=function(){return b(b({},Se()),{},{forceRender:{type:Boolean,default:void 0},getContainer:v.oneOfType([v.string,v.func,v.object,v.looseBool])})},Ie=function(){return b(b({},Se()),{},{getContainer:Function,getOpenCount:Function,scrollLocker:v.any,switchScrollingEffect:Function})};function $e(u){return Array.isArray(u)?u:[u]}var pe={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},_e=Object.keys(pe).filter(function(u){if(typeof document>"u")return!1;var e=document.getElementsByTagName("html")[0];return u in(e?e.style:{})})[0],de=pe[_e];function fe(u,e,r,w){u.addEventListener?u.addEventListener(e,r,w):u.attachEvent&&u.attachEvent("on".concat(e),r)}function ve(u,e,r,w){u.removeEventListener?u.removeEventListener(e,r,w):u.attachEvent&&u.detachEvent("on".concat(e),r)}function ze(u,e){var r=typeof u=="function"?u(e):u;return Array.isArray(r)?r.length===2?r:[r[0],r[1]]:[r]}var he=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ie=!(typeof window<"u"&&window.document&&window.document.createElement),We=function u(e,r,w,m){if(!r||r===document||r instanceof Document)return!1;if(r===e.parentNode)return!0;var O=Math.max(Math.abs(w),Math.abs(m))===Math.abs(m),D=Math.max(Math.abs(w),Math.abs(m))===Math.abs(w),E=r.scrollHeight-r.clientHeight,i=r.scrollWidth-r.clientWidth,d=document.defaultView.getComputedStyle(r),L=d.overflowY==="auto"||d.overflowY==="scroll",N=d.overflowX==="auto"||d.overflowX==="scroll",x=E&&L,M=i&&N;return O&&(!x||x&&(r.scrollTop>=E&&m<0||r.scrollTop<=0&&m>0))||D&&(!M||M&&(r.scrollLeft>=i&&w<0||r.scrollLeft<=0&&w>0))?u(e,r.parentNode,w,m):!1},Re=["width","height","open","prefixCls","placement","level","levelMove","ease","duration","getContainer","onChange","afterVisibleChange","showMask","maskClosable","maskStyle","keyboard","getOpenCount","scrollLocker","contentWrapperStyle","style","class"],R={},Xe=ce({compatConfig:{MODE:3},inheritAttrs:!1,props:Ie(),emits:["close","handleClick","change"],setup:function(e,r){var w=r.emit,m=r.slots,O=Ae({startPos:{x:null,y:null}}),D,E=T(),i=T(),d=T(),L=T(),N=T(),x=[],M="drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",Math.round(Math.random()*9).toString())).toString(16)),_=!ie&&Be?{passive:!1}:!1;Ce(function(){ee(function(){var n=e.open,t=e.getContainer,a=e.showMask,s=e.autofocus,c=t==null?void 0:t();if(k(e),n&&(c&&c.parentNode===document.body&&(R[M]=n),Z(),ee(function(){s&&V()}),a)){var h;(h=e.scrollLocker)===null||h===void 0||h.lock()}})}),X(function(){return e.level},function(){k(e)},{flush:"post"}),X(function(){return e.open},function(){var n=e.open,t=e.getContainer,a=e.scrollLocker,s=e.showMask,c=e.autofocus,h=t==null?void 0:t();h&&h.parentNode===document.body&&(R[M]=!!n),Z(),n?(c&&V(),s&&(a==null||a.lock())):a==null||a.unLock()},{flush:"post"}),ke(function(){var n,t=e.open;delete R[M],t&&(q(!1),document.body.style.touchAction=""),(n=e.scrollLocker)===null||n===void 0||n.unLock()}),X(function(){return e.placement},function(n){n&&(N.value=null)});var V=function(){var t,a;(t=i.value)===null||t===void 0||(a=t.focus)===null||a===void 0||a.call(t)},H=function(t){t.touches.length>1||(O.startPos={x:t.touches[0].clientX,y:t.touches[0].clientY})},F=function(t){if(!(t.changedTouches.length>1)){var a=t.currentTarget,s=t.changedTouches[0].clientX-O.startPos.x,c=t.changedTouches[0].clientY-O.startPos.y;(a===d.value||a===L.value||a===N.value&&We(a,t.target,s,c))&&t.cancelable&&t.preventDefault()}},W=function n(t){var a=t.target;ve(a,de,n),a.style.transition=""},Y=function(t){w("close",t)},U=function(t){t.keyCode===Ve.ESC&&(t.stopPropagation(),Y(t))},ne=function(t){var a=e.open,s=e.afterVisibleChange;t.target===E.value&&t.propertyName.match(/transform$/)&&(i.value.style.transition="",!a&&C()&&(document.body.style.overflowX="",d.value&&(d.value.style.left="",d.value.style.width="")),s&&s(!!a))},J=K(function(){var n=e.placement,t=n==="left"||n==="right",a="translate".concat(t?"X":"Y");return{isHorizontal:t,placementName:a}}),Z=function(){var t=e.open,a=e.width,s=e.height,c=J.value,h=c.isHorizontal,y=c.placementName,g=N.value?N.value.getBoundingClientRect()[h?"width":"height"]:0,P=(h?a:s)||g;ae(t,y,P)},q=function(t,a,s,c){var h=e.placement,y=e.levelMove,g=e.duration,P=e.ease,A=e.showMask;x.forEach(function(z){z.style.transition="transform ".concat(g," ").concat(P),fe(z,de,W);var I=t?s:0;if(y){var G=ze(y,{target:z,open:t});I=t?G[0]:G[1]||0}var Q=typeof I=="number"?"".concat(I,"px"):I,$=h==="left"||h==="top"?Q:"-".concat(Q);$=A&&h==="right"&&c?"calc(".concat($," + ").concat(c,"px)"):$,z.style.transform=I?"".concat(a,"(").concat($,")"):""})},ae=function(t,a,s){if(!ie){var c=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?Te(!0):0;q(t,a,s,c),f(c)}w("change",t)},f=function(t){var a=e.getContainer,s=e.showMask,c=e.open,h=a==null?void 0:a();if(h&&h.parentNode===document.body&&s){var y=["touchstart"],g=[document.body,d.value,L.value,N.value];c&&document.body.style.overflow!=="hidden"?(t&&o(t),document.body.style.touchAction="none",g.forEach(function(P,A){P&&fe(P,y[A]||"touchmove",A?F:H,_)})):C()&&(document.body.style.touchAction="",t&&l(t),g.forEach(function(P,A){P&&ve(P,y[A]||"touchmove",A?F:H,_)}))}},o=function(t){var a=e.placement,s=e.duration,c=e.ease,h="width ".concat(s," ").concat(c),y="transform ".concat(s," ").concat(c);switch(i.value.style.transition="none",a){case"right":i.value.style.transform="translateX(-".concat(t,"px)");break;case"top":case"bottom":i.value.style.width="calc(100% - ".concat(t,"px)"),i.value.style.transform="translateZ(0)";break}clearTimeout(D),D=setTimeout(function(){i.value&&(i.value.style.transition="".concat(y,",").concat(h),i.value.style.width="",i.value.style.transform="")})},l=function(t){var a=e.placement,s=e.duration,c=e.ease;i.value.style.transition="none";var h,y="width ".concat(s," ").concat(c),g="transform ".concat(s," ").concat(c);switch(a){case"left":{i.value.style.width="100%",y="width 0s ".concat(c," ").concat(s);break}case"right":{i.value.style.transform="translateX(".concat(t,"px)"),i.value.style.width="100%",y="width 0s ".concat(c," ").concat(s),d.value&&(d.value.style.left="-".concat(t,"px"),d.value.style.width="calc(100% + ".concat(t,"px)"));break}case"top":case"bottom":{i.value.style.width="calc(100% + ".concat(t,"px)"),i.value.style.height="100%",i.value.style.transform="translateZ(0)",h="height 0s ".concat(c," ").concat(s);break}}clearTimeout(D),D=setTimeout(function(){i.value&&(i.value.style.transition="".concat(g,",").concat(h?"".concat(h,","):"").concat(y),i.value.style.transform="",i.value.style.width="",i.value.style.height="")})},C=function(){return!Object.keys(R).some(function(t){return R[t]})},k=function(t){var a=t.level,s=t.getContainer;if(!ie){var c=s==null?void 0:s(),h=c?c.parentNode:null;if(x=[],a==="all"){var y=h?Array.prototype.slice.call(h.children):[];y.forEach(function(g){g.nodeName!=="SCRIPT"&&g.nodeName!=="STYLE"&&g.nodeName!=="LINK"&&g!==c&&x.push(g)})}else a&&$e(a).forEach(function(g){document.querySelectorAll(g).forEach(function(P){x.push(P)})})}},p=function(t){w("handleClick",t)},B=T(!1);return X(i,function(){ee(function(){B.value=!0})}),function(){var n,t,a,s=e.width,c=e.height,h=e.open,y=e.prefixCls,g=e.placement;e.level,e.levelMove,e.ease,e.duration,e.getContainer,e.onChange,e.afterVisibleChange;var P=e.showMask,A=e.maskClosable,z=e.maskStyle,I=e.keyboard;e.getOpenCount,e.scrollLocker;var G=e.contentWrapperStyle,Q=e.style,$=e.class,Ne=te(e,Re),oe=h&&B.value,Pe=se(y,(n={},j(n,"".concat(y,"-").concat(g),!0),j(n,"".concat(y,"-open"),oe),j(n,$,!!$),j(n,"no-mask",!P),n)),De=J.value.placementName,Oe=g==="left"||g==="top"?"-100%":"100%",ue=oe?"":"".concat(De,"(").concat(Oe,")");return S("div",b(b({},ge(Ne,["switchScrollingEffect","autofocus"])),{},{tabindex:-1,class:Pe,style:Q,ref:i,onKeydown:oe&&I?U:void 0,onTransitionend:ne}),[P&&S("div",{class:"".concat(y,"-mask"),onClick:A?Y:void 0,style:z,ref:d},null),S("div",{class:"".concat(y,"-content-wrapper"),style:b({transform:ue,msTransform:ue,width:he(s)?"".concat(s,"px"):s,height:he(c)?"".concat(c,"px"):c},G),ref:E},[S("div",{class:"".concat(y,"-content"),ref:N},[(t=m.default)===null||t===void 0?void 0:t.call(m)]),m.handler?S("div",{onClick:p,ref:L},[(a=m.handler)===null||a===void 0?void 0:a.call(m)]):null])])}}});const me=Xe;var Ke=["afterVisibleChange","getContainer","wrapperClassName","forceRender"],Ye=["visible","afterClose"],Ue=ce({compatConfig:{MODE:3},inheritAttrs:!1,props:we(He(),{prefixCls:"drawer",placement:"left",getContainer:"body",level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",afterVisibleChange:function(){},showMask:!0,maskClosable:!0,maskStyle:{},wrapperClassName:"",keyboard:!0,forceRender:!1,autofocus:!0}),emits:["handleClick","close"],slots:["handler"],setup:function(e,r){var w=r.emit,m=r.slots,O=T(null),D=function(d){w("handleClick",d)},E=function(d){w("close",d)};return function(){e.afterVisibleChange;var i=e.getContainer,d=e.wrapperClassName,L=e.forceRender,N=te(e,Ke),x=null;if(!i)return S("div",{class:d,ref:O},[S(me,b(b({},N),{},{open:e.open,getContainer:function(){return O.value},onClose:E,onHandleClick:D}),m)]);var M=!!m.handler||L;return(M||e.open||O.value)&&(x=S(Le,{visible:e.open,forceRender:M,getContainer:i,wrapperClassName:d},{default:function(V){var H=V.visible,F=V.afterClose,W=te(V,Ye);return S(me,b(b(b({ref:O},N),W),{},{open:H!==void 0?H:e.open,afterVisibleChange:F!==void 0?F:e.afterVisibleChange,onClose:E,onHandleClick:D}),m)}})),x}}});const Je=Ue;var Ze=["width","height","visible","placement","mask","wrapClassName","class"],qe=be("top","right","bottom","left");be("default","large");var ye={distance:180},Ge=function(){return{autofocus:{type:Boolean,default:void 0},closable:{type:Boolean,default:void 0},closeIcon:v.any,destroyOnClose:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},getContainer:v.any,maskClosable:{type:Boolean,default:void 0},mask:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},wrapStyle:{type:Object,default:void 0},style:{type:Object,default:void 0},class:v.any,wrapClassName:String,size:{type:String},drawerStyle:{type:Object,default:void 0},headerStyle:{type:Object,default:void 0},bodyStyle:{type:Object,default:void 0},contentWrapperStyle:{type:Object,default:void 0},title:v.any,visible:{type:Boolean,default:void 0},width:v.oneOfType([v.string,v.number]),height:v.oneOfType([v.string,v.number]),zIndex:Number,prefixCls:String,push:v.oneOfType([v.looseBool,{type:Object}]),placement:v.oneOf(qe),keyboard:{type:Boolean,default:void 0},extra:v.any,footer:v.any,footerStyle:{type:Object,default:void 0},level:v.any,levelMove:{type:[Number,Array,Function]},handle:v.any,afterVisibleChange:Function,onAfterVisibleChange:Function,"onUpdate:visible":Function,onClose:Function}},Qe=ce({compatConfig:{MODE:3},name:"ADrawer",inheritAttrs:!1,props:we(Ge(),{closable:!0,placement:"right",maskClosable:!0,mask:!0,level:null,keyboard:!0,push:ye}),slots:["closeIcon","title","extra","footer","handle"],setup:function(e,r){var w=r.emit,m=r.slots,O=r.attrs,D=T(!1),E=T(!1),i=T(null),d=Fe("parentDrawerOpts",null),L=xe("drawer",e),N=L.prefixCls;le(!e.afterVisibleChange,"Drawer","`afterVisibleChange` prop is deprecated, please use `@afterVisibleChange` event instead"),le(e.wrapStyle===void 0,"Drawer","`wrapStyle` prop is deprecated, please use `style` instead"),le(e.wrapClassName===void 0,"Drawer","`wrapClassName` prop is deprecated, please use `class` instead");var x=function(){D.value=!0},M=function(){D.value=!1,ee(function(){_()})};je("parentDrawerOpts",{setPush:x,setPull:M}),Ce(function(){var f=e.visible;f&&d&&d.setPush()}),ke(function(){d&&d.setPull()}),X(function(){return e.visible},function(f){d&&(f?d.setPush():d.setPull())},{flush:"post"});var _=function(){var o,l;(o=i.value)===null||o===void 0||(l=o.domFocus)===null||l===void 0||l.call(o)},V=function(o){w("update:visible",!1),w("close",o)},H=function(o){var l;(l=e.afterVisibleChange)===null||l===void 0||l.call(e,o),w("afterVisibleChange",o)},F=K(function(){return e.destroyOnClose&&!e.visible}),W=function(){var o=F.value;o&&(e.visible||(E.value=!0))},Y=K(function(){var f=e.push,o=e.placement,l;return typeof f=="boolean"?l=f?ye.distance:0:l=f.distance,l=parseFloat(String(l||0)),o==="left"||o==="right"?"translateX(".concat(o==="left"?l:-l,"px)"):o==="top"||o==="bottom"?"translateY(".concat(o==="top"?l:-l,"px)"):null}),U=K(function(){var f=e.visible,o=e.mask,l=e.placement,C=e.size,k=C===void 0?"default":C,p=e.width,B=e.height;if(!f&&!o)return{};var n={};if(l==="left"||l==="right"){var t=k==="large"?736:378;n.width=typeof p>"u"?t:p,n.width=typeof n.width=="string"?n.width:"".concat(n.width,"px")}else{var a=k==="large"?736:378;n.height=typeof B>"u"?a:B,n.height=typeof n.height=="string"?n.height:"".concat(n.height,"px")}return n}),ne=K(function(){var f=e.zIndex,o=e.wrapStyle,l=e.mask,C=e.style,k=l?{}:U.value;return b(b(b({zIndex:f,transform:D.value?Y.value:void 0},k),o),C)}),J=function(o){var l=e.closable,C=e.headerStyle,k=re(m,e,"extra"),p=re(m,e,"title");return!p&&!l?null:S("div",{class:se("".concat(o,"-header"),j({},"".concat(o,"-header-close-only"),l&&!p&&!k)),style:C},[S("div",{class:"".concat(o,"-header-title")},[Z(o),p&&S("div",{class:"".concat(o,"-title")},[p])]),k&&S("div",{class:"".concat(o,"-extra")},[k])])},Z=function(o){var l,C=e.closable,k=m.closeIcon?(l=m.closeIcon)===null||l===void 0?void 0:l.call(m):e.closeIcon;return C&&S("button",{key:"closer",onClick:V,"aria-label":"Close",class:"".concat(o,"-close")},[k===void 0?S(Me,null,null):k])},q=function(o){var l;if(E.value&&!e.visible)return null;E.value=!1;var C=e.bodyStyle,k=e.drawerStyle,p={},B=F.value;return B&&(p.opacity=0,p.transition="opacity .3s"),S("div",{class:"".concat(o,"-wrapper-body"),style:b(b({},p),k),onTransitionend:W},[J(o),S("div",{key:"body",class:"".concat(o,"-body"),style:C},[(l=m.default)===null||l===void 0?void 0:l.call(m)]),ae(o)])},ae=function(o){var l=re(m,e,"footer");if(!l)return null;var C="".concat(o,"-footer");return S("div",{class:C,style:e.footerStyle},[l])};return function(){var f;e.width,e.height;var o=e.visible,l=e.placement,C=e.mask,k=e.wrapClassName,p=e.class,B=te(e,Ze),n=C?U.value:{},t=C?"":"no-mask",a=b(b(b(b({},O),ge(B,["size","closeIcon","closable","destroyOnClose","drawerStyle","headerStyle","bodyStyle","title","push","wrapStyle","onAfterVisibleChange","onClose","onUpdate:visible"])),n),{},{onClose:V,afterVisibleChange:H,handler:!1,prefixCls:N.value,open:o,showMask:C,placement:l,class:se((f={},j(f,p,p),j(f,k,!!k),j(f,t,!!t),f)),style:ne.value,ref:i});return S(Je,a,{handler:e.handle?function(){return e.handle}:m.handle,default:function(){return q(N.value)}})}}});const lt=Ee(Qe);export{lt as D};
