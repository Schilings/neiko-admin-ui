import{a as w,i as te,X as ie,j as ae,_ as h,G as z,h as le,P as Z,x as de,b as J,k as re,p as ce}from"./useConfigInject-4e7e38f3.js";import{r as ue,T as se,t as ve,e as ee,f as fe,c as ye,g as he,V as pe,h as Ke}from"./iconUtil-00aaf9c6.js";import{a as _,d as Q,R as T,K as b,S as xe,N as W,l as me,_ as ke}from"./runtime-core.esm-bundler-e620233b.js";import{o as be}from"./styleChecker-cd40cf0f.js";import{d as Ne}from"./debounce-ec6630b4.js";import{F as Ee,a as Ce}from"./FolderOutlined-b28123ef.js";import{F as ge}from"./CaretDownFilled-5dd372a5.js";var ne=4;function De(a){var e,c=a.dropPosition,u=a.dropLevelOffset,p=a.prefixCls,r=a.indent,i=a.direction,x=i===void 0?"ltr":i,d=x==="ltr"?"left":"right",E=x==="ltr"?"right":"left",v=(e={},w(e,d,"".concat(-u*r+ne,"px")),w(e,E,0),e);switch(c){case-1:v.top="".concat(-3,"px");break;case 1:v.bottom="".concat(-3,"px");break;default:v.bottom="".concat(-3,"px"),v[d]="".concat(r+ne,"px");break}return _("div",{style:v,class:"".concat(p,"-drop-indicator")},null)}var oe=function(){var e=ve();return h(h({},e),{},{showLine:{type:[Boolean,Object],default:void 0},multiple:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandParent:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},checkedKeys:{type:[Array,Object]},defaultCheckedKeys:{type:Array},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},selectable:{type:Boolean,default:void 0},loadedKeys:{type:Array},draggable:{type:Boolean,default:void 0},showIcon:{type:Boolean,default:void 0},icon:{type:Function},switcherIcon:Z.any,prefixCls:String,replaceFields:{type:Object},blockNode:{type:Boolean,default:void 0},openAnimation:Z.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":Function,"onUpdate:checkedKeys":Function,"onUpdate:expandedKeys":Function})};const L=Q({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:te(oe(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,c){var u=c.attrs,p=c.expose,r=c.emit,i=c.slots;ie(!(e.treeData===void 0&&i.default));var x=ae("tree",e),d=x.prefixCls,E=x.direction,v=x.virtual,K=T(),N=function(f){var y;(y=K.value)===null||y===void 0||y.scrollTo(f)};p({treeRef:K,onNodeExpand:function(){for(var f,y=arguments.length,D=new Array(y),g=0;g<y;g++)D[g]=arguments[g];(f=K.value)===null||f===void 0||f.onNodeExpand.apply(f,D)},scrollTo:N,selectedKeys:b(function(){var n;return(n=K.value)===null||n===void 0?void 0:n.selectedKeys}),checkedKeys:b(function(){var n;return(n=K.value)===null||n===void 0?void 0:n.checkedKeys}),halfCheckedKeys:b(function(){var n;return(n=K.value)===null||n===void 0?void 0:n.halfCheckedKeys}),loadedKeys:b(function(){var n;return(n=K.value)===null||n===void 0?void 0:n.loadedKeys}),loadingKeys:b(function(){var n;return(n=K.value)===null||n===void 0?void 0:n.loadingKeys}),expandedKeys:b(function(){var n;return(n=K.value)===null||n===void 0?void 0:n.expandedKeys})}),xe(function(){de(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});var O=function(f,y){r("update:checkedKeys",f),r("check",f,y)},j=function(f,y){r("update:expandedKeys",f),r("expand",f,y)},I=function(f,y){r("update:selectedKeys",f),r("select",f,y)};return function(){var n,f=e.showIcon,y=e.showLine,D=e.switcherIcon,g=D===void 0?i.switcherIcon:D,R=e.icon,U=R===void 0?i.icon:R,H=e.blockNode,F=e.checkable,A=e.selectable,B=e.fieldNames,t=B===void 0?e.replaceFields:B,l=e.motion,o=l===void 0?e.openAnimation:l,s=e.itemHeight,S=s===void 0?28:s,m=e.onDoubleclick,$=e.onDblclick,P=h(h(h({},u),be(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{},{showLine:Boolean(y),dropIndicatorRender:De,fieldNames:t,icon:U,itemHeight:S}),V=i.default?z(i.default()):void 0;return _(se,h(h({},P),{},{virtual:v.value,motion:o,ref:K,prefixCls:d.value,class:le((n={},w(n,"".concat(d.value,"-icon-hide"),!f),w(n,"".concat(d.value,"-block-node"),H),w(n,"".concat(d.value,"-unselectable"),!A),w(n,"".concat(d.value,"-rtl"),E.value==="rtl"),n),u.class),direction:E.value,checkable:F,selectable:A,switcherIcon:function(k){return ue(d.value,g,y,k)},onCheck:O,onExpand:j,onSelect:I,onDblclick:$||m,children:V}),h(h({},i),{},{checkable:function(){return _("span",{class:"".concat(d.value,"-checkbox-inner")},null)}}))}}});var C;(function(a){a[a.None=0]="None",a[a.Start=1]="Start",a[a.End=2]="End"})(C||(C={}));function Y(a,e,c){function u(p){var r=p[e.key],i=p[e.children];c(r,p)!==!1&&Y(i||[],e,c)}a.forEach(u)}function Te(a){var e=a.treeData,c=a.expandedKeys,u=a.startKey,p=a.endKey,r=a.fieldNames,i=r===void 0?{title:"title",key:"key",children:"children"}:r,x=[],d=C.None;if(u&&u===p)return[u];if(!u||!p)return[];function E(v){return v===u||v===p}return Y(e,i,function(v){if(d===C.End)return!1;if(E(v)){if(x.push(v),d===C.None)d=C.Start;else if(d===C.Start)return d=C.End,!1}else d===C.Start&&x.push(v);return c.indexOf(v)!==-1}),x}function G(a,e,c){var u=J(e),p=[];return Y(a,c,function(r,i){var x=u.indexOf(r);return x!==-1&&(p.push(i),u.splice(x,1)),!!u.length}),p}var we=["icon","blockNode"],_e=function(){return h(h({},oe()),{},{expandAction:{type:[Boolean,String]}})};function Ae(a){var e=a.isLeaf,c=a.expanded;return e?_(ge,null,null):c?_(Ee,null,null):_(Ce,null,null)}const X=Q({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:te(_e(),{showIcon:!0,expandAction:"click"}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,c){var u,p=c.attrs,r=c.slots,i=c.emit,x=c.expose,d=T(e.treeData||ee(z((u=r.default)===null||u===void 0?void 0:u.call(r))));W(function(){return e.treeData},function(){d.value=e.treeData}),me(function(){ke(function(){if(e.treeData===void 0&&r.default){var t;d.value=ee(z((t=r.default)===null||t===void 0?void 0:t.call(r)))}})});var E=T(),v=T(),K=b(function(){return fe(e.fieldNames)}),N=T(),O=function(l){var o;(o=N.value)===null||o===void 0||o.scrollTo(l)};x({scrollTo:O,selectedKeys:b(function(){var t;return(t=N.value)===null||t===void 0?void 0:t.selectedKeys}),checkedKeys:b(function(){var t;return(t=N.value)===null||t===void 0?void 0:t.checkedKeys}),halfCheckedKeys:b(function(){var t;return(t=N.value)===null||t===void 0?void 0:t.halfCheckedKeys}),loadedKeys:b(function(){var t;return(t=N.value)===null||t===void 0?void 0:t.loadedKeys}),loadingKeys:b(function(){var t;return(t=N.value)===null||t===void 0?void 0:t.loadingKeys}),expandedKeys:b(function(){var t;return(t=N.value)===null||t===void 0?void 0:t.expandedKeys})});var j=function(){var l=ye(d.value,{fieldNames:K.value}),o=l.keyEntities,s;return e.defaultExpandAll?s=Object.keys(o):e.defaultExpandParent?s=he(e.expandedKeys||e.defaultExpandedKeys||[],o):s=e.expandedKeys||e.defaultExpandedKeys,s},I=T(e.selectedKeys||e.defaultSelectedKeys||[]),n=T(j());W(function(){return e.selectedKeys},function(){e.selectedKeys!==void 0&&(I.value=e.selectedKeys)},{immediate:!0}),W(function(){return e.expandedKeys},function(){e.expandedKeys!==void 0&&(n.value=e.expandedKeys)},{immediate:!0});var f=function(l,o){var s=o.isLeaf;s||l.shiftKey||l.metaKey||l.ctrlKey||N.value.onNodeExpand(l,o)},y=Ne(f,200,{leading:!0}),D=function(l,o){e.expandedKeys===void 0&&(n.value=l),i("update:expandedKeys",l),i("expand",l,o)},g=function(l,o){var s=e.expandAction;s==="click"&&y(l,o),i("click",l,o)},R=function(l,o){var s=e.expandAction;(s==="dblclick"||s==="doubleclick")&&y(l,o),i("doubleclick",l,o),i("dblclick",l,o)},U=function(l,o){var s=e.multiple,S=o.node,m=o.nativeEvent,$=S[K.value.key],P=h(h({},o),{},{selected:!0}),V=(m==null?void 0:m.ctrlKey)||(m==null?void 0:m.metaKey),M=m==null?void 0:m.shiftKey,k;s&&V?(k=l,E.value=$,v.value=k,P.selectedNodes=G(d.value,k,K.value)):s&&M?(k=Array.from(new Set([].concat(J(v.value||[]),J(Te({treeData:d.value,expandedKeys:n.value,startKey:$,endKey:E.value,fieldNames:K.value}))))),P.selectedNodes=G(d.value,k,K.value)):(k=[$],E.value=$,v.value=k,P.selectedNodes=G(d.value,k,K.value)),i("update:selectedKeys",k),i("select",k,P),e.selectedKeys===void 0&&(I.value=k)},H=function(l,o){i("update:checkedKeys",l),i("check",l,o)},F=ae("tree",e),A=F.prefixCls,B=F.direction;return function(){var t=le("".concat(A.value,"-directory"),w({},"".concat(A.value,"-directory-rtl"),B.value==="rtl"),p.class),l=e.icon,o=l===void 0?r.icon:l,s=e.blockNode,S=s===void 0?!0:s,m=re(e,we);return _(L,h(h(h({},p),{},{icon:o||Ae,ref:N,blockNode:S},m),{},{prefixCls:A.value,class:t,expandedKeys:n.value,selectedKeys:I.value,onSelect:U,onClick:g,onDblclick:R,onExpand:D,onCheck:H}),r)}}});var q=Q(h(h({},pe),{},{name:"ATreeNode",props:Ke}));const Le=ce(L,{DirectoryTree:X,TreeNode:q,install:function(e){return e.component(L.name,L),e.component(q.name,q),e.component(X.name,X),e}});export{Le as _};
