import{h as we,k as Ke,a as B,_ as h,K as je,w as Qe,i as $e,f as se,b as ve,P as he,e as Ye,j as Ze,m as et}from"./useConfigInject-4e7e38f3.js";import{u as tt,T as nt,i as Me,a as at,b as lt,f as rt,c as ot,t as it,B as ut,d as ct,g as st}from"./iconUtil-13917c84.js";import{K as W}from"./KeyCode-e7009ae3.js";import{p as vt}from"./pickAttrs-a6ea96de.js";import{L as dt,c as ft}from"./List-f67cc211.js";import{u as pt}from"./useMemo-4a215623.js";import{o as _e}from"./styleChecker-cd40cf0f.js";import{M as mt,J as gt,d as Re,K as x,L as ht,N as Ae,m as We,_ as Ee,a as j,F as bt,a2 as ge,S as Fe,ae as ne,R as Ge}from"./runtime-core.esm-bundler-e620233b.js";import{u as Le}from"./useMergedState-49e4ba80.js";import{u as ke}from"./useState-6ab94c07.js";import{u as St}from"./FormItemContext-d1513cce.js";function Ot(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var ze=Symbol("SelectContextKey");function yt(i){return mt(ze,i)}function Ct(){return gt(ze,{})}var It=["disabled","title","children","style","class","className"];function He(i){return typeof i=="string"||typeof i=="number"}var Vt=Re({compatConfig:{MODE:3},name:"OptionList",inheritAttrs:!1,slots:["option"],setup:function(e,b){var g=b.expose,N=b.slots,n=tt(),c=Ct(),f=x(function(){return"".concat(n.prefixCls,"-item")}),v=pt(function(){return c.flattenOptions},[function(){return n.open},function(){return c.flattenOptions}],function(I){return I[0]}),C=ft(),S=function(l){l.preventDefault()},O=function(l){C.current&&C.current.scrollTo(typeof l=="number"?{index:l}:l)},w=function(l){for(var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,u=v.value.length,r=0;r<u;r+=1){var p=(l+r*V+u)%u,P=v.value[p],le=P.group,E=P.data;if(!le&&!E.disabled)return p}return-1},M=ht({activeIndex:w(0)}),y=function(l){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;M.activeIndex=l;var u={source:V?"keyboard":"mouse"},r=v.value[l];if(!r){c.onActiveValue(null,-1,u);return}c.onActiveValue(r.value,l,u)};Ae([function(){return v.value.length},function(){return n.searchValue}],function(){y(c.defaultActiveFirstOption!==!1?w(0):-1)},{immediate:!0});var _=function(l){return c.rawValues.has(l)&&n.mode!=="combobox"};Ae([function(){return n.open},function(){return n.searchValue}],function(){if(!n.multiple&&n.open&&c.rawValues.size===1){var I=Array.from(c.rawValues)[0],l=We(v.value).findIndex(function(V){var u=V.data;return u[c.fieldNames.value]===I});l!==-1&&(y(l),Ee(function(){O(l)}))}n.open&&Ee(function(){var V;(V=C.current)===null||V===void 0||V.scrollTo(void 0)})},{immediate:!0,flush:"post"});var T=function(l){l!==void 0&&c.onSelect(l,{selected:!c.rawValues.has(l)}),n.multiple||n.toggleOpen(!1)},A=function(l){return typeof l.label=="function"?l.label():l.label};function R(I){var l=v.value[I];if(!l)return null;var V=l.data||{},u=V.value,r=l.group,p=vt(V,!0),P=A(l);return l?j("div",h(h({"aria-label":typeof P=="string"&&!r?P:null},p),{},{key:I,role:r?"presentation":"option",id:"".concat(n.id,"_list_").concat(I),"aria-selected":_(u)}),[u]):null}var z=function(l){var V=l.which,u=l.ctrlKey;switch(V){case W.N:case W.P:case W.UP:case W.DOWN:{var r=0;if(V===W.UP?r=-1:V===W.DOWN?r=1:Ot()&&u&&(V===W.N?r=1:V===W.P&&(r=-1)),r!==0){var p=w(M.activeIndex+r,r);O(p),y(p,!0)}break}case W.ENTER:{var P=v.value[M.activeIndex];P&&!P.data.disabled?T(P.value):T(void 0),n.open&&l.preventDefault();break}case W.ESC:n.toggleOpen(!1),n.open&&l.stopPropagation()}},ae=function(){},de=function(l){O(l)};return g({onKeydown:z,onKeyup:ae,scrollTo:de}),function(){var I=n.id,l=n.notFoundContent,V=n.onPopupScroll,u=c.menuItemSelectedIcon,r=c.fieldNames,p=c.virtual,P=c.listHeight,le=c.listItemHeight,E=N.option,$=M.activeIndex,re=Object.keys(r).map(function(q){return r[q]});return v.value.length===0?j("div",{role:"listbox",id:"".concat(I,"_list"),class:"".concat(f.value,"-empty"),onMousedown:S},[l]):j(bt,null,[j("div",{role:"listbox",id:"".concat(I,"_list"),style:{height:0,width:0,overflow:"hidden"}},[R($-1),R($),R($+1)]),j(dt,{itemKey:"key",ref:C,data:v.value,height:P,itemHeight:le,fullHeight:!1,onMousedown:S,onScroll:V,virtual:p},{default:function(L,oe){var k,U=L.group,fe=L.groupOption,F=L.data,ie=L.value,Q=F.key,H=typeof L.label=="function"?L.label():L.label;if(U){var K,be=(K=F.title)!==null&&K!==void 0?K:He(H)&&H;return j("div",{class:we(f.value,"".concat(f.value,"-group")),title:be},[E?E(F):H!==void 0?H:Q])}var Y=F.disabled,pe=F.title;F.children;var Se=F.style,X=F.class,Oe=F.className,ue=Ke(F,It),Pe=_e(ue,re),Z=_(ie),ee="".concat(f.value,"-option"),me=we(f.value,ee,X,Oe,(k={},B(k,"".concat(ee,"-grouped"),fe),B(k,"".concat(ee,"-active"),$===oe&&!Y),B(k,"".concat(ee,"-disabled"),Y),B(k,"".concat(ee,"-selected"),Z),k)),ye=A(L),s=!u||typeof u=="function"||Z,t=typeof ye=="number"?ye:ye||ie,a=He(t)?t.toString():void 0;return pe!==void 0&&(a=pe),j("div",h(h({},Pe),{},{"aria-selected":Z,class:me,title:a,onMousemove:function(m){ue.onMousemove&&ue.onMousemove(m),!($===oe||Y)&&y(oe)},onClick:function(m){Y||T(ie),ue.onClick&&ue.onClick(m)},style:Se}),[j("div",{class:"".concat(ee,"-content")},[E?E(F):t]),je(u)||Z,s&&j(nt,{class:"".concat(f.value,"-option-state"),customizeIcon:u,customizeIconProps:{isSelected:Z}},{default:function(){return[Z?"âœ“":null]}})])}})])}}});const wt=Vt;var _t=["value","disabled"];function Pt(i){var e=i.key,b=i.children,g=i.props,N=g.value,n=g.disabled,c=Ke(g,_t),f=b==null?void 0:b.default;return h({key:e,value:N!==void 0?N:e,children:f,disabled:n||n===""},c)}function Ue(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,b=Qe(i).map(function(g,N){var n;if(!je(g)||!g.type)return null;var c=g.type.isSelectOptGroup,f=g.key,v=g.children,C=g.props;if(e||!c)return Pt(g);var S=v&&v.default?v.default():void 0,O=(C==null?void 0:C.label)||((n=v.label)===null||n===void 0?void 0:n.call(v))||f;return h(h({key:"__RC_SELECT_GRP__".concat(f===null?N:String(f),"__")},C),{},{label:O,options:Ue(S||[])})}).filter(function(g){return g});return b}function xt(i,e,b){var g=ge(),N=ge(),n=ge(),c=ge([]);return Ae([i,e],function(){i.value?c.value=We(i.value).slice():c.value=Ue(e.value)},{immediate:!0,deep:!0}),Fe(function(){var f=c.value,v=new Map,C=new Map,S=b.value;function O(w){for(var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<w.length;y+=1){var _=w[y];!_[S.options]||M?(v.set(_[S.value],_),C.set(_[S.label],_)):O(_[S.options],!0)}}O(f),g.value=f,N.value=v,n.value=C}),{options:g,valueOptions:N,labelOptions:n}}function Xe(i){return Array.isArray(i)?i:i!==void 0?[i]:[]}function Ne(i,e){return Xe(i).join("").toUpperCase().includes(e)}const Nt=function(i,e,b,g,N){return x(function(){var n=b.value,c=N==null?void 0:N.value,f=g==null?void 0:g.value;if(!n||f===!1)return i.value;var v=e.value,C=v.options,S=v.label,O=v.value,w=[],M=typeof f=="function",y=n.toUpperCase(),_=M?f:function(A,R){return c?Ne(R[c],y):R[C]?Ne(R[S!=="children"?S:"label"],y):Ne(R[O],y)},T=M?function(A){return Me(A)}:function(A){return A};return i.value.forEach(function(A){if(A[C]){var R=_(n,T(A));if(R)w.push(A);else{var z=A[C].filter(function(ae){return _(n,T(ae))});z.length&&w.push(h(h({},A),{},B({},C,z)))}return}_(n,T(A))&&w.push(A)}),w})},Mt=function(i,e){var b=ge({values:new Map,options:new Map}),g=x(function(){var n=b.value,c=n.values,f=n.options,v=i.value.map(function(O){if(O.label===void 0){var w;return h(h({},O),{},{label:(w=c.get(O.value))===null||w===void 0?void 0:w.label})}return O}),C=new Map,S=new Map;return v.forEach(function(O){C.set(O.value,O),S.set(O.value,e.value.get(O.value)||f.get(O.value))}),b.value.values=C,b.value.options=S,v}),N=function(c){return e.value.get(c)||b.value.options.get(c)};return[g,N]};var At=["inputValue"];function Je(){return h(h({},ct()),{},{prefixCls:String,id:String,backfill:{type:Boolean,default:void 0},fieldNames:Object,inputValue:String,searchValue:String,onSearch:Function,autoClearSearchValue:{type:Boolean,default:void 0},onSelect:Function,onDeselect:Function,filterOption:{type:[Boolean,Function],default:void 0},filterSort:Function,optionFilterProp:String,optionLabelProp:String,options:Array,defaultActiveFirstOption:{type:Boolean,default:void 0},virtual:{type:Boolean,default:void 0},listHeight:Number,listItemHeight:Number,menuItemSelectedIcon:he.any,mode:String,labelInValue:{type:Boolean,default:void 0},value:he.any,defaultValue:he.any,onChange:Function,children:Array})}function Ft(i){return!i||Ye(i)!=="object"}const Rt=Re({compatConfig:{MODE:3},name:"Select",inheritAttrs:!1,props:$e(Je(),{prefixCls:"vc-select",autoClearSearchValue:!0,listHeight:200,listItemHeight:20,dropdownMatchSelectWidth:!0}),setup:function(e,b){var g=b.expose,N=b.attrs,n=b.slots,c=at(ne(e,"id")),f=x(function(){return lt(e.mode)}),v=x(function(){return!!(!e.options&&e.children)}),C=x(function(){return e.filterOption===void 0&&e.mode==="combobox"?!1:e.filterOption}),S=x(function(){return rt(e.fieldNames,v.value)}),O=Le("",{value:x(function(){return e.searchValue!==void 0?e.searchValue:e.inputValue}),postState:function(t){return t||""}}),w=se(O,2),M=w[0],y=w[1],_=xt(ne(e,"options"),ne(e,"children"),S),T=_.valueOptions,A=_.labelOptions,R=_.options,z=function(t){var a=Xe(t);return a.map(function(o){var m,d,J,te;if(Ft(o))m=o;else{var Ce;J=o.key,d=o.label,m=(Ce=o.value)!==null&&Ce!==void 0?Ce:J}var D=T.value.get(m);if(D){var Ie;d===void 0&&(d=D==null?void 0:D[e.optionLabelProp||S.value.label]),J===void 0&&(J=(Ie=D==null?void 0:D.key)!==null&&Ie!==void 0?Ie:m),te=D==null?void 0:D.disabled}return{label:d,value:m,key:J,disabled:te,option:D}})},ae=Le(e.defaultValue,{value:ne(e,"value")}),de=se(ae,2),I=de[0],l=de[1],V=x(function(){var s,t=z(I.value);return e.mode==="combobox"&&!((s=t[0])!==null&&s!==void 0&&s.value)?[]:t}),u=Mt(V,T),r=se(u,2),p=r[0],P=r[1],le=x(function(){if(!e.mode&&p.value.length===1){var s=p.value[0];if(s.value===null&&(s.label===null||s.label===void 0))return[]}return p.value.map(function(t){var a;return h(h({},t),{},{label:(a=typeof t.label=="function"?t.label():t.label)!==null&&a!==void 0?a:t.value})})}),E=x(function(){return new Set(p.value.map(function(s){return s.value}))});Fe(function(){if(e.mode==="combobox"){var s,t=(s=p.value[0])===null||s===void 0?void 0:s.value;t!=null&&y(String(t))}},{flush:"post"});var $=function(t,a){var o,m=a??t;return o={},B(o,S.value.value,t),B(o,S.value.label,m),o},re=ge();Fe(function(){if(e.mode!=="tags"){re.value=R.value;return}var s=R.value.slice(),t=function(o){return T.value.has(o)};ve(p.value).sort(function(a,o){return a.value<o.value?-1:1}).forEach(function(a){var o=a.value;t(o)||s.push($(o,a.label))}),re.value=s});var q=Nt(re,S,M,C,ne(e,"optionFilterProp")),L=x(function(){return e.mode!=="tags"||!M.value||q.value.some(function(s){return s[e.optionFilterProp||"value"]===M.value})?q.value:[$(M.value)].concat(ve(q.value))}),oe=x(function(){return e.filterSort?ve(L.value).sort(function(s,t){return e.filterSort(s,t)}):L.value}),k=x(function(){return ot(oe.value,{fieldNames:S.value,childrenAsData:v.value})}),U=function(t){var a=z(t);if(l(a),e.onChange&&(a.length!==p.value.length||a.some(function(d,J){var te;return((te=p.value[J])===null||te===void 0?void 0:te.value)!==(d==null?void 0:d.value)}))){var o=e.labelInValue?a.map(function(d){return h(h({},d),{},{originLabel:d.label,label:typeof d.label=="function"?d.label():d.label})}):a.map(function(d){return d.value}),m=a.map(function(d){return Me(P(d.value))});e.onChange(f.value?o:o[0],f.value?m:m[0])}},fe=ke(null),F=se(fe,2),ie=F[0],Q=F[1],H=ke(0),K=se(H,2),be=K[0],Y=K[1],pe=x(function(){return e.defaultActiveFirstOption!==void 0?e.defaultActiveFirstOption:e.mode!=="combobox"}),Se=function(t,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},m=o.source,d=m===void 0?"keyboard":m;Y(a),e.backfill&&e.mode==="combobox"&&t!==null&&d==="keyboard"&&Q(String(t))},X=function(t,a){var o=function(){var xe,ce=P(t),Ve=ce==null?void 0:ce[S.value.label];return[e.labelInValue?{label:typeof Ve=="function"?Ve():Ve,originLabel:Ve,value:t,key:(xe=ce==null?void 0:ce.key)!==null&&xe!==void 0?xe:t}:t,Me(ce)]};if(a&&e.onSelect){var m=o(),d=se(m,2),J=d[0],te=d[1];e.onSelect(J,te)}else if(!a&&e.onDeselect){var Ce=o(),D=se(Ce,2),Ie=D[0],qe=D[1];e.onDeselect(Ie,qe)}},Oe=function(t,a){var o,m=f.value?a.selected:!0;m?o=f.value?[].concat(ve(p.value),[t]):[t]:o=p.value.filter(function(d){return d.value!==t}),U(o),X(t,m),e.mode==="combobox"?Q(""):(!f.value||e.autoClearSearchValue)&&(y(""),Q(""))},ue=function(t,a){U(t),(a.type==="remove"||a.type==="clear")&&a.values.forEach(function(o){X(o.value,!1)})},Pe=function(t,a){if(y(t),Q(null),a.source==="submit"){var o=(t||"").trim();if(o){var m=Array.from(new Set([].concat(ve(E.value),[o])));U(m),X(o,!0),y("")}return}if(a.source!=="blur"){var d;e.mode==="combobox"&&U(t),(d=e.onSearch)===null||d===void 0||d.call(e,t)}},Z=function(t){var a=t;e.mode!=="tags"&&(a=t.map(function(m){var d=A.value.get(m);return d==null?void 0:d.value}).filter(function(m){return m!==void 0}));var o=Array.from(new Set([].concat(ve(E.value),ve(a))));U(o),o.forEach(function(m){X(m,!0)})},ee=x(function(){return e.virtual!==!1&&e.dropdownMatchSelectWidth!==!1});yt(it(h(h({},_),{},{flattenOptions:k,onActiveValue:Se,defaultActiveFirstOption:pe,onSelect:Oe,menuItemSelectedIcon:ne(e,"menuItemSelectedIcon"),rawValues:E,fieldNames:S,virtual:ee,listHeight:ne(e,"listHeight"),listItemHeight:ne(e,"listItemHeight"),childrenAsData:v})));var me=Ge();g({focus:function(){var t;(t=me.value)===null||t===void 0||t.focus()},blur:function(){var t;(t=me.value)===null||t===void 0||t.blur()},scrollTo:function(t){var a;(a=me.value)===null||a===void 0||a.scrollTo(t)}});var ye=x(function(){return _e(e,["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","listHeight","listItemHeight","value","defaultValue","labelInValue","onChange"])});return function(){return j(ut,h(h(h({},ye.value),N),{},{id:c,prefixCls:e.prefixCls,ref:me,omitDomProps:At,mode:e.mode,displayValues:le.value,onDisplayValuesChange:ue,searchValue:M.value,onSearch:Pe,onSearchSplit:Z,dropdownMatchSelectWidth:e.dropdownMatchSelectWidth,OptionList:wt,emptyOptions:!k.value.length,activeValue:ie.value,activeDescendantId:"".concat(c,"_list_").concat(be.value)}),n)}}});var Te=function(){return null};Te.isSelectOption=!0;Te.displayName="ASelectOption";const Tt=Te;var De=function(){return null};De.isSelectOptGroup=!0;De.displayName="ASelectOptGroup";const Dt=De;var Et=function(){return h(h({},_e(Je(),["inputIcon","mode","getInputElement","getRawInputElement","backfill"])),{},{value:{type:[Array,Object,String,Number]},defaultValue:{type:[Array,Object,String,Number]},notFoundContent:he.any,suffixIcon:he.any,itemIcon:he.any,size:String,mode:String,bordered:{type:Boolean,default:!0},transitionName:String,choiceTransitionName:{type:String,default:""},"onUpdate:value":Function})},Be="SECRET_COMBOBOX_MODE_DO_NOT_USE",G=Re({compatConfig:{MODE:3},name:"ASelect",Option:Tt,OptGroup:Dt,inheritAttrs:!1,props:$e(Et(),{listHeight:256,listItemHeight:24}),SECRET_COMBOBOX_MODE_DO_NOT_USE:Be,slots:["notFoundContent","suffixIcon","itemIcon","removeIcon","clearIcon","dropdownRender","option","placeholder","tagRender","maxTagPlaceholder","optionLabel"],setup:function(e,b){var g=b.attrs,N=b.emit,n=b.slots,c=b.expose,f=Ge(),v=St(),C=function(){var r;(r=f.value)===null||r===void 0||r.focus()},S=function(){var r;(r=f.value)===null||r===void 0||r.blur()},O=function(r){var p;(p=f.value)===null||p===void 0||p.scrollTo(r)},w=x(function(){var u=e.mode;if(u!=="combobox")return u===Be?"combobox":u}),M=Ze("select",e),y=M.prefixCls,_=M.direction,T=M.configProvider,A=M.size,R=M.getPrefixCls,z=x(function(){return R()}),ae=x(function(){return et(z.value,"slide-up",e.transitionName)}),de=x(function(){var u;return we((u={},B(u,"".concat(y.value,"-lg"),A.value==="large"),B(u,"".concat(y.value,"-sm"),A.value==="small"),B(u,"".concat(y.value,"-rtl"),_.value==="rtl"),B(u,"".concat(y.value,"-borderless"),!e.bordered),u))}),I=function(){for(var r=arguments.length,p=new Array(r),P=0;P<r;P++)p[P]=arguments[P];N("update:value",p[0]),N.apply(void 0,["change"].concat(p)),v.onFieldChange()},l=function(r){N("blur",r),v.onFieldBlur()};c({blur:S,focus:C,scrollTo:O});var V=x(function(){return w.value==="multiple"||w.value==="tags"});return function(){var u,r,p=e.notFoundContent,P=e.listHeight,le=P===void 0?256:P,E=e.listItemHeight,$=E===void 0?24:E,re=e.getPopupContainer,q=e.dropdownClassName,L=e.virtual,oe=e.dropdownMatchSelectWidth,k=e.id,U=k===void 0?v.id.value:k,fe=e.placeholder,F=fe===void 0?(u=n.placeholder)===null||u===void 0?void 0:u.call(n):fe,ie=T.renderEmpty,Q=T.getPopupContainer,H;p!==void 0?H=p:n.notFoundContent?H=n.notFoundContent():w.value==="combobox"?H=null:H=ie("Select");var K=st(h(h({},e),{},{multiple:V.value,prefixCls:y.value}),n),be=K.suffixIcon,Y=K.itemIcon,pe=K.removeIcon,Se=K.clearIcon,X=_e(e,["prefixCls","suffixIcon","itemIcon","removeIcon","clearIcon","size","bordered"]),Oe=we(q,B({},"".concat(y.value,"-dropdown-").concat(_.value),_.value==="rtl"));return j(Rt,h(h(h({ref:f,virtual:L,dropdownMatchSelectWidth:oe},X),g),{},{placeholder:F,listHeight:le,listItemHeight:$,mode:w.value,prefixCls:y.value,direction:_.value,inputIcon:be,menuItemSelectedIcon:Y,removeIcon:pe,clearIcon:Se,notFoundContent:H,class:[de.value,g.class],getPopupContainer:re||Q,dropdownClassName:Oe,onChange:I,onBlur:l,id:U,dropdownRender:X.dropdownRender||n.dropdownRender,transitionName:ae.value,children:(r=n.default)===null||r===void 0?void 0:r.call(n),tagRender:e.tagRender||n.tagRender,optionLabelRender:n.optionLabel,maxTagPlaceholder:e.maxTagPlaceholder||n.maxTagPlaceholder}),{option:n.option})}}});G.install=function(i){return i.component(G.name,G),i.component(G.Option.displayName,G.Option),i.component(G.OptGroup.displayName,G.OptGroup),i};var Jt=G.Option;G.OptGroup;const qt=G;export{qt as S,Jt as a,Et as s};
