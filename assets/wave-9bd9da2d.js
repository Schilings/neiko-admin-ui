import{j as q,y as W}from"./useConfigInject-4e7e38f3.js";import{d as _,O as G,_ as J,a0 as K,x as Q}from"./runtime-core.esm-bundler-e620233b.js";var j=function(t){return setTimeout(t,16)},B=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(j=function(t){return window.requestAnimationFrame(t)},B=function(t){return window.cancelAnimationFrame(t)});var P=0,N=new Map;function H(e){N.delete(e)}function y(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;P+=1;var i=P;function a(f){if(f===0)H(i),e();else{var c=j(function(){a(f-1)});N.set(i,c)}}return a(t),i}y.cancel=function(e){var t=N.get(e);return H(t),B(t)};var h={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},x={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},m=[],l=[];function X(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||(delete h.animationstart.animation,delete x.animationend.animation),"TransitionEvent"in window||(delete h.transitionstart.transition,delete x.transitionend.transition);function i(a,f){for(var c in a)if(a.hasOwnProperty(c)){var v=a[c];for(var d in v)if(d in t){f.push(v[d]);break}}}i(h,m),i(x,l)}typeof window<"u"&&typeof document<"u"&&X();function U(e,t,i){e.addEventListener(t,i,!1)}function D(e,t,i){e.removeEventListener(t,i,!1)}var Y={startEvents:m,addStartEventListener:function(t,i){if(m.length===0){setTimeout(i,0);return}m.forEach(function(a){U(t,a,i)})},removeStartEventListener:function(t,i){m.length!==0&&m.forEach(function(a){D(t,a,i)})},endEvents:l,addEndEventListener:function(t,i){if(l.length===0){setTimeout(i,0);return}l.forEach(function(a){U(t,a,i)})},removeEndEventListener:function(t,i){l.length!==0&&l.forEach(function(a){D(t,a,i)})}};const A=Y;var u;function F(e){return!e||e.offsetParent===null}function Z(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}const nt=_({compatConfig:{MODE:3},name:"Wave",props:{insertExtraNode:Boolean,disabled:Boolean},setup:function(t,i){var a=i.slots,f=i.expose,c=Q(),v=q("",t),d=v.csp,E=v.prefixCls;f({csp:d});var p=null,L=null,M=null,S=!1,s=null,C=!1,I=function(n){if(!C){var r=W(c);!n||n.target!==r||S||k(r)}},O=function(n){!n||n.animationName!=="fadeEffect"||k(n.target)},z=function(){var n=t.insertExtraNode;return n?"".concat(E.value,"-click-animating"):"".concat(E.value,"-click-animating-without-extra-node")},R=function(n,r){var g=t.insertExtraNode,T=t.disabled;if(!(T||!n||F(n)||n.className.indexOf("-leave")>=0)){s=document.createElement("div"),s.className="".concat(E.value,"-click-animating-node");var b=z();if(n.removeAttribute(b),n.setAttribute(b,"true"),u=u||document.createElement("style"),r&&r!=="#ffffff"&&r!=="rgb(255, 255, 255)"&&Z(r)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(r)&&r!=="transparent"){var w;(w=d.value)!==null&&w!==void 0&&w.nonce&&(u.nonce=d.value.nonce),s.style.borderColor=r,u.innerHTML=`
        [`.concat(E.value,"-click-animating-without-extra-node='true']::after, .").concat(E.value,`-click-animating-node {
          --antd-wave-shadow-color: `).concat(r,`;
        }`),document.body.contains(u)||document.body.appendChild(u)}g&&n.appendChild(s),A.addStartEventListener(n,I),A.addEndEventListener(n,O)}},k=function(n){if(!(!n||n===s||!(n instanceof Element))){var r=t.insertExtraNode,g=z();n.setAttribute(g,"false"),u&&(u.innerHTML=""),r&&s&&n.contains(s)&&n.removeChild(s),A.removeStartEventListener(n,I),A.removeEndEventListener(n,O)}},V=function(n){if(!(!n||!n.getAttribute||n.getAttribute("disabled")||n.className.indexOf("disabled")>=0)){var r=function(T){if(!(T.target.tagName==="INPUT"||F(T.target))){k(n);var b=getComputedStyle(n).getPropertyValue("border-top-color")||getComputedStyle(n).getPropertyValue("border-color")||getComputedStyle(n).getPropertyValue("background-color");L=setTimeout(function(){return R(n,b)},0),y.cancel(M),S=!0,M=y(function(){S=!1},10)}};return n.addEventListener("click",r,!0),{cancel:function(){n.removeEventListener("click",r,!0)}}}};return G(function(){J(function(){var o=W(c);o.nodeType===1&&(p=V(o))})}),K(function(){p&&p.cancel(),clearTimeout(L),C=!0}),function(){var o;return(o=a.default)===null||o===void 0?void 0:o.call(a)[0]}}});export{nt as W,y as w};
